<loaders-css [loader]="'ball-scale-ripple-multiple'" class="app-loader-wrapper" [loaderClass]="'blueRipple'" *ngIf="isRippleLoad">
</loaders-css>
<section class="homewrap middle-section clearFix">
  <form novalidate #myForm="ngForm" (ngSubmit)="submitForm(myForm)">
    <!-- Left Side Form -->
    <aside class="pull-left middle-left " id="addNewEnquiry">
      <!-- Header -->
      <section class="middle-top clearFix">

        <div class="row">
          <h1 class="pull-left">
            Add New Enquiry
          </h1>
          <aside class="pull-right">
            <input type="button" value="Upload Enquiry" [routerLink]="['../upload']" class="btn">
          </aside>
        </div>

      </section>
      <!-- Accordian Menu Element -->
      <section class="middle-main clearFix" id="middleMain">
        <div class="add-new-enquiry-form accordian-section">
          <ul class="accordian">
            <!-- Basic Form -->
            <li class="active data-filled" id="basicDetails">
              <!-- Accordian Toggler -->
              <div class="accordian-heading">
                <h4>
                  <span class="circle-accor">1</span> Basic Details
                  <span class="open-accor" id="openBasic" (click)="toggleForm($event)">+</span>
                  <span class="close-accor" id="closeBasic" (click)="toggleForm($event)">-</span>
                </h4>
              </div>
              <!-- Accordian Form 1 -->
              <div class="accordian-content AdFilter-field">
                <div class="form-type1">

                  <!-- Name -->
                  <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.name != ''}">
                    <label for="name">Name*</label>
                    <input type="text" value="" id="name" #name="ngModel" class="form-ctrl" [(ngModel)]="newEnqData.name" name="name" maxlength="50"
                      pattern="^([a-zA-Z .-]){1,30}$" required />

                    <div *ngIf="name.invalid && (name.dirty || name.touched)" class="alert invalid-alert">
                      <div *ngIf="name.errors.required">
                        name is required.
                      </div>
                      <div *ngIf="name.errors.pattern">
                        Only Alphabets . - Allowed.
                      </div>
                    </div>
                  </div>

                  <!-- phone -->
                  <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.phone != ''}">
                    <label for="phone">Phone No*</label>
                    <input type="text" value="" id="phone" class="form-ctrl" [(ngModel)]="newEnqData.phone" (focusout)="updatePhoneFetchRecords()"
                      name="phone" maxlength="10" OnlyNumber="true" />

                  </div>

                  <!-- fetch more details -->
                  <div class="more-detail">
                    <a (click)="getLeadDetails()" style="cursor:pointer">Fetch Lead Details</a>
                  </div>

                  <!-- email enq -->
                  <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.email != ''}">
                    <label for="email">Email ID</label>
                    <input type="text" value="" id="email" #email="ngModel" class="form-ctrl" [(ngModel)]="newEnqData.email" name="email" pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,3}$"
                    />

                    <div *ngIf="email.invalid && (email.dirty || email.touched)" class="alert invalid-alert">
                      <div *ngIf="email.errors.pattern">
                        Enter email in format eg. someone@xyz.com
                      </div>
                    </div>
                  </div>

                  <!-- gender -->
                  <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.gender != ''}">
                    <label for="gender">Gender</label>
                    <select class="form-ctrl" [(ngModel)]="newEnqData.gender" name="gender" id="gender">
                      <option value=""></option>
                      <option value="M">Male</option>
                      <option value="F">Female</option>
                      <option value="NA">NA</option>
                    </select>

                  </div>

                  <!-- Date of Birth -->
                  <div class="field-wrapper datePickerBox" [ngClass]="{'has-value': newEnqData.dob != 'Invalid date'}">
                    <label for="dob">Date of Birth</label>
                    <input type="text" value="" id="dob" class="form-ctrl bsDatepicker" [(ngModel)]="newEnqData.dob" name="dob" readonly='true'
                      bsDatepicker>

                    <span class="date-clear" name="dob" (click)="newEnqData.dob = ''">clear</span>
                  </div>

                  <!-- city -->
                  <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.city != -1}">
                    <label for="cityDdn">City
                      <span *ngIf="isCityMandatory == 1">*</span>
                    </label>

                    <select id="cityDdn" class="form-ctrl" [(ngModel)]="newEnqData.city" (ngModelChange)="onCitySelctionChanges($event)" name="city">
                      <option value="-1"></option>
                      <option *ngFor="let city of cityListDataSource" [value]="city.city">{{city.city}}</option>
                    </select>
                  </div>

                  <!-- area -->
                  <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.area != -1}">
                    <label for="areaDdn">Area
                    </label>
                    <select id="areaDdn" class="form-ctrl" [(ngModel)]="newEnqData.area" name="area">
                      <option value="-1"></option>
                      <option *ngFor="let area of areaListDataSource" [value]="area.area">{{area.area}}</option>
                    </select>

                  </div>

                  <!-- Source -->
                  <div class="field-wrapper " [ngClass]="{'has-value': newEnqData.source_id != '-1'}">
                    <label for="source">Source*</label>
                    <select id="source" class="form-ctrl" [(ngModel)]="newEnqData.source_id" name="source">
                      <option value="-1"></option>
                      <option *ngFor="let source of sourceLead" [value]="source.id">{{source.name}}</option>
                    </select>

                    <span (click)="showAddSourcePops()" class="sourceI iconPlus">+</span>
                  </div>

                  <!-- Additional details -->
                  <div class="more-detail">
                    <b>
                      <a *ngIf="!additionDetails" (click)="showAdditionDetails()" style="font-size: 14px;font-weight: 600;cursor:pointer">+ &nbsp; Add Additional Details</a>
                      <a *ngIf="additionDetails" (click)="showAdditionDetails()" style="font-size: 14px;font-weight: 600;cursor:pointer">- &nbsp; Add Additional Details</a>
                    </b>
                  </div>

                </div>
                <div class="form-type1" *ngIf="additionDetails">
                  <br>
                  <!-- address -->
                  <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.curr_address != ''}">
                    <label for="userAddress">Address</label>
                    <input type="text" value="" id="userAddress" class="form-ctrl" [(ngModel)]="newEnqData.curr_address" name="address" />

                  </div>

                  <!-- Phone -->
                  <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.phone2 != ''}">
                    <label for="altContact">Alternate Contact</label>
                    <input type="text" value="" id="altContact" #phone2="ngModel" class="form-ctrl" [(ngModel)]="newEnqData.phone2" name="phone2"
                      maxlength="10" OnlyNumber="true" />

                  </div>

                  <!-- Email -->
                  <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.email2 != ''}">
                    <label for="email2">Alternate Email ID</label>
                    <input type="text" value="" id="email2" #email2="ngModel" class="form-ctrl" [(ngModel)]="newEnqData.email2" name="email2"
                      pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,3}$" />

                    <div *ngIf="email2.invalid && (email2.dirty || email2.touched)" class="alert invalid-alert">
                      <div *ngIf="email2.errors.pattern">
                        Enter email in format eg. someone@xyz.com
                      </div>
                    </div>
                  </div>

                  <!-- Name -->
                  <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.parent_name != ''}">
                    <label for="guardianName">Parent Name</label>
                    <input type="text" value="" id="guardianName" class="form-ctrl" [(ngModel)]="newEnqData.parent_name" name="guardianName"
                      pattern="^([a-zA-Z .-]){1,30}$" maxlength="50" #guardianName="ngModel" />

                    <div *ngIf="guardianName.invalid && (guardianName.dirty || guardianName.touched)" class="alert invalid-alert">
                      <div *ngIf="guardianName.errors.pattern">
                        Only Alphabets . - Allowed.
                      </div>
                    </div>
                  </div>

                  <!-- Phone -->
                  <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.parent_phone != ''}">
                    <label for="guardianContact">Parent Contact</label>
                    <input type="text" value="" id="guardianContact" class="form-ctrl" [(ngModel)]="newEnqData.parent_phone" name="guardianContact"
                      maxlength="10" OnlyNumber="true" />

                  </div>

                  <!-- Email -->
                  <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.parent_email != ''}">
                    <label for="guardianEmail">Parent Email</label>
                    <input type="text" value="" id="guardianEmail" class="form-ctrl" [(ngModel)]="newEnqData.parent_email" name="guardianEmail"
                      pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,3}$" #guardianEmail="ngModel" />

                    <div *ngIf="guardianEmail.invalid && (guardianEmail.dirty || guardianEmail.touched)" class="alert invalid-alert">
                      <div *ngIf="guardianEmail.errors.pattern">
                        Enter email in format eg. someone@xyz.com
                      </div>
                    </div>
                  </div>

                  <!-- Link -->
                  <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.link != ''}">
                    <label for="enquirerLink">Link Details</label>
                    <input type="text" value="" id="enquirerLink" class="form-ctrl" [(ngModel)]="newEnqData.link" name="enquirerLink" />

                  </div>

                  <!-- Fee Commited -->
                  <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.fee_committed != ''}">
                    <label for="feeCommitted">Fees Committed Details</label>
                    <input type="text" value="" id="feeCommitted" class="form-ctrl" [(ngModel)]="newEnqData.fee_committed" name="feeCommitted"
                      OnlyNumber="true" #feeCommitted="ngModel" />

                  </div>

                  <!-- Discount -->
                  <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.discount_offered != ''}">
                    <label for="discount">Discount Offered Details</label>
                    <input type="text" value="" id="discount" class="form-ctrl" [(ngModel)]="newEnqData.discount_offered" name="discount" pattern="[0-9]+"
                      OnlyNumber="true" #discount="ngModel" />

                  </div>

                </div>
              </div>
            </li>
            <!-- Academic Form 2-->
            <li class="data-filled" id="academicDetails">
              <div class="accordian-heading">
                <h4>
                  <span class="circle-accor">2</span> Academics Details
                  <span class="close-accor" id="closeAcademic" (click)="toggleForm($event)">-</span>
                  <span class="open-accor" id="openAcademic" (click)="toggleForm($event)">+</span>
                </h4>
              </div>
              <div class="accordian-content">
                <div class="form-type2">
                  <!-- school -->
                  <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.school_id != '-1'}">
                    <label for="institutionName">Institution Name</label>
                    <select id="institutionName" class="form-ctrl" [(ngModel)]="newEnqData.school_id" name="institutename">
                      <option value="-1"></option>
                      <option *ngFor="let institute of school" [value]="institute.school_id">
                        {{institute.school_name}}
                      </option>
                    </select>

                    <a (click)="openAddInstitute()" class="create-institution" style="cursor:pointer">+</a>
                  </div>
                  <!-- standard -->
                  <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.standard_id != '-1'}">


                    <label *ngIf="!isProfessional" for="editStandard">Standard</label>
                    <label *ngIf="isProfessional" for="editStandard">Master Course</label>
                    <select id="editStandard" class="form-ctrl" [(ngModel)]="newEnqData.standard_id" (ngModelChange)="fetchSubject($event)" name="editStandard">

                      <option value="-1"></option>
                      <option *ngFor="let std of enqStd" [value]="std.standard_id">{{std.standard_name}}</option>

                    </select>
                    <div class="questionInfo">
                      <span class="qInfoIcon" style="margin-top:-12px;">?</span>
                      <div class="tooltip-box-field tooltip-size">
                        Enquirer select a standard to fetch related subject
                      </div>
                    </div>
                  </div>
                  <!-- subject -->
                  <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.subject_id != '-1'}">
                    <label *ngIf="!isProfessional" for="forSubject">Subject</label>
                    <label *ngIf="isProfessional" for="forSubject">Course</label>
                    <select id="forSubject" class="form-ctrl" [(ngModel)]="newEnqData.subject_id" name="subject">
                      <option value="-1"></option>
                      <option *ngFor="let subject of enqSub" [value]="subject.subject_id">{{subject.subject_name}}</option>
                    </select>

                    <div class="questionInfo">
                      <span class="qInfoIcon" style="margin-top:-12px;">?</span>
                      <div class="tooltip-box-field">
                        Subject with relation to the standard opted
                      </div>
                    </div>
                  </div>
                  <!-- custom -->
                  <custom-enquiry *ngFor="let component of customComponents;let i= index;">

                    <div class="" *ngIf="component.type == 1" input-def>
                      <div class="field-wrapper" [ngClass]="{'has-value': component.value != ''}">
                        <label *ngIf="component.is_required == 'Y'" for="{{component.id}}">{{component.label}}*</label>
                        <label *ngIf="component.is_required == 'N'" for="{{component.id}}">{{component.label}} </label>
                        <input type="text" value="" id="{{component.id}}" [(ngModel)]="component.value" class="form-ctrl" name="{{component.label +i}}"
                        />

                      </div>
                    </div>

                    <div class="" *ngIf="component.type == 2" input-def>
                      <br>
                      <div class="field-checkbox-wrapper">
                        <input class="form-checkbox" id="{{component.id}}" type="checkbox" [(ngModel)]="component.value" (ngModelChange)="updateCustomComponent($event, component)"
                          name="{{component.label +i}}" value="">
                        <label *ngIf="component.is_required == 'Y'" for="{{component.id}}">{{component.label}}*</label>
                        <label *ngIf="component.is_required == 'N'" for="{{component.id}}">{{component.label}} </label>
                      </div>
                    </div>

                    <div class="" *ngIf="component.type == 3" input-def>
                      <div class="field-wrapper" [ngClass]="{'has-value': component.value != ''}">
                        <label *ngIf="component.is_required == 'Y'" for="{{component.id}}">{{component.label}}*</label>
                        <label *ngIf="component.is_required == 'N'" for="{{component.id}}">{{component.label}} </label>
                        <select id="{{component.id}}" class="form-ctrl" name="{{component.label +i}}" [(ngModel)]="component.value">
                          <option value=""></option>
                          <option *ngFor="let opt of component.prefilled_data" value="{{opt.data}}">{{opt.data}}</option>
                        </select>

                      </div>
                    </div>

                    <div class="" *ngIf="component.type == 4" input-def>
                      <div id="{{component.id}}wrapper" class="field-wrapper" (click)="multiselectVisible($event.target.id)" [ngClass]="{'has-value': component.selectedString != ''}">
                        <label *ngIf="component.is_required == 'Y'" for="component.id">{{component.label}}*</label>
                        <label *ngIf="component.is_required == 'N'" for="component.id">{{component.label}} </label>
                        <input id="{{component.id}}" type="text" [ngModel]="component.selectedString" name="{{component.label +i}}" class="form-ctrl"
                          readonly="true" />
                      </div>
                      <div id="{{component.id}}multi" class="hide multiselect-wrapper" (mouseleave)="multiselectVisible(component.id)">
                        <div class="multiselect-wrapper-inner">
                          <ul class="">
                            <li *ngFor="let opt of component.prefilled_data">
                              <div class="field-checkbox-wrapper">
                                <input type="checkbox" value="" name="{{opt.data}}" [(ngModel)]="opt.checked" (ngModelChange)="updateMultiSelect(opt, component.id)"
                                  class="form-checkbox">
                                <label for="opt.data">{{opt.data}}</label>
                              </div>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>

                    <div class="newDate" *ngIf="component.type == 5" input-def>
                      <div class="field-wrapper datePickerBox" [ngClass]="{'has-value': component.value != 'Invalid date'}">
                        <label for="component.id">{{component.label}} </label>
                        <input type="text" value="" readonly="true" id="{{component.id}}" [(ngModel)]="component.value" class="form-ctrl bsDatepicker"
                          name="{{component.label}}" bsDatepicker/>

                      </div>
                    </div>

                  </custom-enquiry>
                </div>
              </div>
            </li>
          </ul>
        </div>
      </section>
      <!-- Footer for Accordian Menu -->
      <section class="middle-bottom clearFix">
        <div class="pull-left" style="margin-left: 25px;">
          <div class="clear-detail" style="padding: 20px 10px;">
            <a (click)="clearFormData()" style="color: red;font-weight: 600;cursor:pointer">Clear Details</a>
          </div>
        </div>
        <aside class="pull-right">
          <div style="display: inline-block;" class="field-checkbox-wrapper">

            <input type="checkbox" value="" [(ngModel)]="addNextCheck" class="form-checkbox" id="addNextEnquiry" name="addNextEnquiry">
            <label for="addNextEnquiry">Add Next Enquiry</label>
          </div>
          <input style="display: inline-block;" type="button" value="Cancel" class="btn cancle" routerLink="/enquiry">
          <input *ngIf="newEnqData.status != 12 && newEnqData.status != 1" style="display: inline-block;" type="button" value="Add & Register Enquiry"
            [disabled]="!myForm.form.valid" class="btn fullBlue" (click)="submitRegisterForm()">
          <input style="display: inline-block;" type="button" value="Add Enquiry" [disabled]="!myForm.form.valid" class="btn fullBlue"
            (click)="submitForm(myForm)">
        </aside>
      </section>
    </aside>
    <!-- Right side form for Office purrpose only -->
    <aside class="pull-right middle-right" id="rightSideBar">
      <!--Last enquiry information-->
      <section class="shadow-box clearfix">
        <div class="last-added-info">
          <ul>
            <li>
              <span class="last-user-name">
                <strong>Last Added Name -</strong>
                <dfn>{{getLastAddName()}}</dfn>
              </span>
              <span class="view-details">
                <a style="cursor:pointer" (click)="navigateToEdit()">View details</a>
              </span>
            </li>
            <li>
              <span class="last-Enquiry-no">
                <strong>Enquiry No. -</strong>
                <dfn>{{getLastEnqNum()}}</dfn>
              </span>
              <span class="enquiry-time">{{getLastUpdateTime()}}</span>
            </li>
          </ul>
        </div>
      </section>
      <!-- Enquiry Details official use-->
      <section class="enquiry-detail common-right-section">
        <h4>
          <strong>Enquiry Details</strong> (Official Use)</h4>
        <div class="box-shadow-lite">

          <div class="field-wrapper datePickerBox" [ngClass]="{'has-value': newEnqData.enquiry_date != 'Invalid date'}">
            <label for="">Enquiry Date</label>
            <input type="text" value="" id="" class="form-ctrl bsDatepicker" [(ngModel)]="newEnqData.enquiry_date" name="enqDate" readonly="true"
              bsDatepicker>

          </div>
          <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.status != '-1'}">
            <label for="eStatus">Enquiry Status</label>
            <select id="eStatus" class="form-ctrl" [(ngModel)]="newEnqData.status" name="status" disabled>
              <option value="-1"></option>
              <option *ngFor="let status of enqstatus" [value]="status.data_key" [attr.selected]="status.data_value == 'Open' ? '' : null"
                [hidden]="status.data_key == 12 ? true : false">{{status.data_value}}</option>
            </select>

          </div>

          <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.priority != '-1'}">
            <label for="priority">Enquiry Priority</label>
            <select id="priority" class="form-ctrl" [(ngModel)]="newEnqData.priority" name="priority">
              <option value="-1"></option>
              <option *ngFor="let priority of enqPriority" [value]="priority.data_key" [attr.selected]="priority.data_value == 'cold_call'? '' : null">
                {{priority.data_value}}
              </option>
            </select>

          </div>
          <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.follow_type != '-1'}">
            <label for="followUpType">Follow Up Type
              <div class="questionInfo">
                <span class="qInfoIcon">?</span>
                <span class="tooltip-box-field">Information regarding follow up</span>
              </div>

            </label>
            <select id="followUpType" class="form-ctrl" [(ngModel)]="newEnqData.follow_type" name="followtype">
              <option value="-1"></option>
              <option *ngFor="let followUp of enqFollowType" [value]="followUp.data_key" [attr.selected]="followUp.data_value == 'call' ? '' : null">
                {{followUp.data_value}}
              </option>
            </select>


          </div>
          <div class="field-wrapper datePickerBox " [ngClass]="{'has-value': newEnqData.followUpDate != 'Invalid date'}">
            <label for="followUpDate">Follow Up Date</label>
            <input type="text" value="" id="followUpDate" class="form-ctrl bsDatepicker" name="followUpDate" [(ngModel)]="newEnqData.followUpDate"
              readonly="true" bsDatepicker>
            <span class="date-clear" name="followupdate" (click)="newEnqData.followUpDate = ''">clear</span>
          </div>
          <!-- <div class="time-picker">
            <div class="field-wrapper" id="hourpar" style="padding-right: 10px;" [ngClass]="{'has-value': hour != ''}">
              <select id="hour" class="form-ctrl ng-valid ng-touched ng-dirty" [(ngModel)]="hour" name="hour" style="width: 60px;">
                <option *ngFor="let hour of hourArr" [value]="hour">
                  {{hour}}
                </option>
              </select>
              <label for="hour">Hour</label>
            </div>
            <div class="field-wrapper" id="minutepar" style="padding-right: 10px;" [ngClass]="{'has-value': minute != ''}">
              <select id="minute" class="form-ctrl ng-valid ng-touched ng-dirty" [(ngModel)]="minute" name="minute" style="width: 70px;">
                <option *ngFor="let minute of minArr" [value]="minute">
                  {{minute}}
                </option>
              </select>
              <label for="minute">Minute</label>
            </div>
            <div class="field-wrapper" id="meridianpar" style="padding-right: 10px;" [ngClass]="{'has-value': meridian != ''}">
              <select id="hour" class="form-ctrl ng-valid ng-touched ng-dirty" [(ngModel)]="meridian" name="meridian" style="width: 90px;">
                <option *ngFor="let meridian of meridianArr" [value]="meridian">
                  {{meridian}}
                </option>
              </select>
              <label for="meridian">Meridian</label>
            </div>
          </div>   -->

          <div class="time-picker">
            <div class="field-wrapper" id="hourpar" style="padding-right: 10px;" [ngClass]="{'has-value': hour != ''}">
              <label for="hour">Hour</label>
              <select id="hour" class="form-ctrl ng-valid ng-touched ng-dirty" [(ngModel)]="followUpTime" name="hour" style="width: 75px;"
                (ngModelChange)="timeChanges($event)">
                <option *ngFor="let time of times" [value]="time">
                  {{time}}
                </option>
              </select>

            </div>
            <div class="field-wrapper" id="minutepar" style="padding-right: 10px;" [ngClass]="{'has-value': minute != ''}">
              <label for="minute">Minute</label>
              <select id="minute" class="form-ctrl ng-valid ng-touched ng-dirty" [(ngModel)]="minute" name="minute" style="width: 70px;">
                <option *ngFor="let minute of minArr" [value]="minute">
                  {{minute}}
                </option>
              </select>

            </div>

          </div>

          <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.referred_by != '-1'}">
            <label for="refferedBy">Referred By</label>
            <select id="refferedBy" class="form-ctrl" [(ngModel)]="newEnqData.referred_by" name="reffered">
              <option value="-1"></option>
              <option *ngFor="let refer of refferedBy" [value]="refer.id">{{refer.name}}</option>
            </select>

            <span style="right: 5px;" class="sourceI iconPlus" (click)="showAddReferPops()">+</span>
          </div>

          <div class="field-wrapper" *ngIf="isMainBranch == 'Y' || subBranchSelected == true" [ngClass]="{'has-value': newEnqData.source_instituteId != '-1'}">
            <label for="selectBranch">Branch</label>
            <select id="selectBranch" class="form-ctrl" [(ngModel)]="newEnqData.source_instituteId" name="selectBranch" (ngModelChange)="branchUpdated($event)">
              <option *ngFor="let data of branchesList" [value]="data.institute_id">{{data.institute_name}}</option>
            </select>
          </div>

          <div class="field-wrapper" *ngIf="isEnquiryAdmin" [ngClass]="{'has-value': newEnqData.assigned_to != '-1'}">
            <label for="assignedTo">Assigned To</label>
            <select id="assignedTo" class="form-ctrl" [(ngModel)]="newEnqData.assigned_to" name="assigned_to">
              <option value="-1"></option>
              <option *ngFor="let assign of enqAssignTo" [value]="assign.userid">{{assign.name}}</option>
            </select>

          </div>
          <div class="field-wrapper" [ngClass]="{'has-value': newEnqData.enquiry != ''}">
            <label for="Remarks">Comment</label>
            <input type="text" value="" id="Remarks" class="form-ctrl" [(ngModel)]="newEnqData.enquiry" name="remarks">

          </div>
        </div>
      </section>

    </aside>

  </form>
</section>




<!-- Confirmation PopUp -->
<section id="popup" class="popupWrapper fadeIn" *ngIf="confimationPop">
  <div class="popup pos-abs">
    <div class="popup-wrapper pos-rel">
      <span class="closePopup pos-abs fbold show" id="popupCloseBtn" (click)="closePopUp()">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="9310 2185 16 16">
          <g id="Group_1228" data-name="Group 1228" transform="translate(8298 1888)">
            <g id="Group_1213" data-name="Group 1213" transform="translate(34.189 -7.77)">
              <line id="Line_274" data-name="Line 274" class="cls-1" y2="19.798" transform="translate(992.81 305.77) rotate(45)" />
              <line id="Line_275" data-name="Line 275" class="cls-1" x1="19.798" transform="translate(978.81 305.77) rotate(45)" />
            </g>
            <rect id="Rectangle_686" data-name="Rectangle 686" style="stroke:none;" class="cls-2" width="16" height="16" transform="translate(1012 297)"
            />
          </g>
        </svg>
      </span>
      <div class="popup-content">
        <h2>Confirmation</h2>
        <div class="confirmation-popup-content">
          <div class="">
            <p>Thank you for submitting New Enquiry.</p>
            <p>If you like to make any changes to the last submitted enquiry, kindly click
              <a style="cursor:pointer" (click)="navigateToEdit()">Edit</a>
            </p>
          </div>
          <div class="">
            <p>You have submitted
              <strong>{{enquiryConfirm.otherDetails.total_new_enquiries}} New Enquiry </strong> as on
              <strong>{{todayDate | date }}</strong>
            </p>
            <p>If you like to view complete Enquiry List now, click
              <a style="cursor:pointer" routerLink="/enquiry">More Info</a>
            </p>
          </div>
          <div>
            <div class="pull-right add-form-btns">
              <a style="cursor:pointer" (click)="reloadEnquiryForm()">Add new enquiry</a>
              <a style="cursor:pointer" routerLink="/enquiry/upload">Add Bulk enquiry</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>




<!-- Add New institute -->
<enquiry-pop-up [hidden]="!isInstitutePop">

  <span class="closePopup pos-abs fbold show" id="popupCloseBtn" (click)="closeInstituteAdder()" close-button>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="9310 2185 16 16">
      <g id="Group_1228" data-name="Group 1228" transform="translate(8298 1888)">
        <g id="Group_1213" data-name="Group 1213" transform="translate(34.189 -7.77)">
          <line id="Line_274" data-name="Line 274" class="cls-1" y2="19.798" transform="translate(992.81 305.77) rotate(45)" />
          <line id="Line_275" data-name="Line 275" class="cls-1" x1="19.798" transform="translate(978.81 305.77) rotate(45)" />
        </g>
        <rect id="Rectangle_686" data-name="Rectangle 686" style="stroke:none;" class="cls-2" width="16" height="16" transform="translate(1012 297)"
        />
      </g>
    </svg>
  </span>

  <h2 popup-header>Institute Editor</h2>

  <div class="institute-editor" popup-content>

    <div class="row clearFix add-edit">
      <a class="expend-box" (click)="toggleInstituteAdd()">
        <i id="add-institute-icon">-</i>
        <span>Create New Institute</span>
      </a>
    </div>

    <section class="row clearFix create-standard-form" *ngIf="isNewInstitute">
      <div class="row">
        <div class="c-lg-6 c-md-6 c-sm-6 c-xs-6 pull-left">
          <div class="field-wrapper" [ngClass]="{'has-value': createInstitute.instituteName != ''}">
            <label for="instituteName">Institute Name</label>
            <input type="text" value="" id="instituteName" class="form-ctrl" [(ngModel)]="createInstitute.instituteName" name="instituteName"
            />

          </div>
        </div>

        <div class="c-lg-6 c-md-6 c-sm-6 c-xs-6 pull-right">
          <aside class="pull-right">
            <input type="button" value="Cancel" class="btn" (click)="closeAddInstitute()">
            <input type="button" value="Create" class="fullBlue btn" (click)="addInstituteData()">
          </aside>
        </div>

      </div>
    </section>

    <div class="row">
      <div class="table-responsive institute-table">
        <table>
          <thead>
            <tr>
              <th>Institute Id</th>
              <th>Institute Name</th>
              <th> Action </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let sch of instituteList">

              <td *ngIf="!sch.edit">
                <div class="inst-id">
                  {{sch.school_id}}
                </div>
              </td>

              <td *ngIf="sch.edit">
                <div class="inst-id">
                  {{sch.school_id}}
                </div>
              </td>


              <td *ngIf="!sch.edit">
                <div class="inst-name">
                  {{sch.school_name}}
                </div>
              </td>

              <td *ngIf="sch.edit">
                <div class="field-wrapper ">
                  <input type="text" [(ngModel)]="sch.school_name" class="form-ctrl" name="instituteName" />
                </div>
              </td>

              <td class="edit-view-btn" *ngIf="!sch.edit">
                <div class="">
                  <a (click)="editInstitute(sch.school_id)" style="cursor:pointer">
                    <i class="edit-icon cursor-icon" aria-hidden="true"></i>Edit
                  </a>
                </div>
                <div class="">
                  <a (click)="deleteInstitute(sch.school_id)" style="cursor:pointer">
                    <i class="view-icon cursor-icon" aria-hidden="true"></i>Delete
                  </a>
                </div>
              </td>

              <td class="edit-view-btn" *ngIf="sch.edit">
                <div class="">
                  <a (click)="cancelEditInstitute(sch.school_id)" style="cursor:pointer">
                    <i class="edit-icon" aria-hidden="true"></i>Cancel
                  </a>
                </div>
                <div class="">
                  <a (click)="updateInstitute(sch.school_id)" style="cursor:pointer">
                    <i class="view-icon update-icon" aria-hidden="true"></i>Update
                  </a>
                </div>
              </td>

            </tr>
          </tbody>
        </table>
      </div>
    </div>

  </div>

</enquiry-pop-up>



<!-- Add New Source -->
<enquiry-pop-up [hidden]="!isSourcePop">
  <span class="closePopup pos-abs fbold show" id="popupCloseBtn" (click)="hideAddSourcePops()" close-button>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="9310 2185 16 16">
      <g id="Group_1228" data-name="Group 1228" transform="translate(8298 1888)">
        <g id="Group_1213" data-name="Group 1213" transform="translate(34.189 -7.77)">
          <line id="Line_274" data-name="Line 274" class="cls-1" y2="19.798" transform="translate(992.81 305.77) rotate(45)" />
          <line id="Line_275" data-name="Line 275" class="cls-1" x1="19.798" transform="translate(978.81 305.77) rotate(45)" />
        </g>
        <rect id="Rectangle_686" data-name="Rectangle 686" style="stroke:none;" class="cls-2" width="16" height="16" transform="translate(1012 297)"
        />
      </g>
    </svg>
  </span>

  <h2 popup-header> Source Editor</h2>

  <div class="institute-editor" popup-content>

    <div class="row clearFix add-edit">
      <a class="expend-box" (click)="toggleSourceAdd()">
        <i id="add-source-icon">-</i>
        <span>Create New Source</span>
      </a>
    </div>

    <section class="row clearFix create-standard-form" *ngIf="isNewSource">
      <div class="row">
        <div class="c-lg-6 c-md-6 c-sm-6 c-xs-6 pull-left">
          <div class="field-wrapper" [ngClass]="{'has-value': createSource.name != ''}">
            <label for="sourceName">Source Name</label>
            <input type="text" value="" id="sourceName" class="form-ctrl" [(ngModel)]="createSource.name" name="sourceName" />

          </div>
        </div>

        <div class="c-lg-6 c-md-6 c-sm-6 c-xs-6 pull-right">
          <aside class="pull-right">
            <input type="button" value="Cancel" class="btn" (click)="closeAddSource()">
            <input type="button" value="Create" class="fullBlue btn" (click)="addSourceData()">
          </aside>
        </div>

      </div>
    </section>

    <div class="row">
      <div class="table-responsive institute-table">
        <table>
          <thead>
            <tr>
              <th>Source Name</th>
              <th> Action </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let sch of sourceList">
              <td *ngIf="!sch.edit">
                <div class="inst-name">
                  {{sch.name}}
                </div>
              </td>

              <td *ngIf="sch.edit">
                <div class="field-wrapper ">
                  <input type="text" [(ngModel)]="sch.name" class="form-ctrl" name="sourceName" />
                </div>
              </td>

              <td class="edit-view-btn" *ngIf="!sch.edit">
                <div class="">
                  <a (click)="editSource(sch.id)" style="cursor:pointer">
                    <i class="edit-icon cursor-icon" aria-hidden="true"></i>Edit
                  </a>
                </div>
                <div class="">
                  <a (click)="deleteSource(sch.id)" style="cursor:pointer">
                    <i class="view-icon cursor-icon" aria-hidden="true"></i>Delete
                  </a>
                </div>
              </td>

              <td class="edit-view-btn" *ngIf="sch.edit">
                <div class="">
                  <a (click)="cancelEditSource(sch.id)" style="cursor:pointer">
                    <i class="edit-icon" aria-hidden="true"></i>Cancel
                  </a>
                </div>
                <div class="">
                  <a (click)="updateSource(sch.id)" style="cursor:pointer">
                    <i class="view-icon update-icon" aria-hidden="true"></i>Update
                  </a>
                </div>
              </td>

            </tr>
          </tbody>
        </table>
      </div>
    </div>

  </div>

</enquiry-pop-up>




<!-- Add New Reference -->
<enquiry-pop-up [hidden]="!isReferPop">

  <span class="closePopup pos-abs fbold show" id="popupCloseBtn" (click)="hideAddReferPops()" close-button>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="9310 2185 16 16">
      <g id="Group_1228" data-name="Group 1228" transform="translate(8298 1888)">
        <g id="Group_1213" data-name="Group 1213" transform="translate(34.189 -7.77)">
          <line id="Line_274" data-name="Line 274" class="cls-1" y2="19.798" transform="translate(992.81 305.77) rotate(45)" />
          <line id="Line_275" data-name="Line 275" class="cls-1" x1="19.798" transform="translate(978.81 305.77) rotate(45)" />
        </g>
        <rect id="Rectangle_686" data-name="Rectangle 686" style="stroke:none;" class="cls-2" width="16" height="16" transform="translate(1012 297)"
        />
      </g>
    </svg>
  </span>

  <h2 popup-header>Add Referrer </h2>

  <div class="institute-editor" popup-content>

    <div class="row clearFix add-edit">
      <a class="expend-box" (click)="toggleReferAdd()">
        <i id="add-refer-icon">-</i>
        <span>Create New Reference</span>
      </a>
    </div>

    <section class="row clearFix create-standard-form" *ngIf="isNewRefer">
      <div class="row">
        <div class="c-lg-6 c-md-6 c-sm-6 c-xs-6 pull-left">
          <div class="field-wrapper" [ngClass]="{'has-value': createReferer.name != ''}">
            <label for="referName">Refer Name</label>
            <input type="text" value="" id="referName" class="form-ctrl" [(ngModel)]="createReferer.name" name="referName" />

          </div>
        </div>

        <div class="c-lg-6 c-md-6 c-sm-6 c-xs-6 pull-right">
          <aside class="pull-right">
            <input type="button" value="Cancel" class="btn" (click)="closeAddRefer()">
            <input type="button" value="Create" class="fullBlue btn" (click)="addReferData()">
          </aside>
        </div>

      </div>
    </section>

    <div class="row">
      <div class="table-responsive institute-table">
        <table>
          <thead>
            <tr>
              <th>Reference Name</th>
              <th> Action </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let sch of referList">
              <td *ngIf="!sch.edit">
                <div class="inst-name">
                  {{sch.name}}
                </div>
              </td>

              <td *ngIf="sch.edit">
                <div class="field-wrapper ">
                  <input type="text" [(ngModel)]="sch.name" class="form-ctrl" name="sourceName" />
                </div>
              </td>

              <td class="edit-view-btn" *ngIf="!sch.edit">
                <div class="">
                  <a (click)="editRefer(sch.id)" style="cursor:pointer">
                    <i class="edit-icon cursor-icon" aria-hidden="true"></i>Edit
                  </a>
                </div>
                <div class="">
                  <a (click)="deleteRefer(sch.id)" style="cursor:pointer">
                    <i class="view-icon cursor-icon" aria-hidden="true"></i>Delete
                  </a>
                </div>
              </td>

              <td class="edit-view-btn" *ngIf="sch.edit">
                <div class="">
                  <a (click)="cancelEditRefer(sch.id)" style="cursor:pointer">
                    <i class="edit-icon" aria-hidden="true"></i>Cancel
                  </a>
                </div>
                <div class="">
                  <a (click)="updateRefer(sch.id)" style="cursor:pointer">
                    <i class="view-icon update-icon" aria-hidden="true"></i>Update
                  </a>
                </div>
              </td>

            </tr>
          </tbody>
        </table>
      </div>
    </div>

  </div>

</enquiry-pop-up>