<div class="page-content">
    <div class="head_padding">
      <div class="w98">
        <div class="page_heading">
          <p>Sale Item</p>
        </div>
      </div>
    </div>
    <form  #myForm="ngForm" autocomplete="off">
      <div class="w98 flex">
        <div class="div_11">
          <div class="heading1">
            <p>Sale</p>
          </div>
         
              <div class="pt102">
             
                  <select class="select wid100"  name="user_role" id="user_role"
                  (change)="getUserAgainstRole($event.target.value)" [(ngModel)]="model.user_role">
                     <option value="">Role<span class="astrik">*</span></option>
                     <option value="{{datas.role_id}}" *ngFor="let datas of roleAllData">{{datas.role_name}}</option>
                   </select>
              </div>
                 <div class="pt102">
                 <select class="select wid100" name="user_id" id="user_id"
                  [(ngModel)]="model.user_id">
                    <option value="" selected>User<span class="astrik">*</span></option>
                    <option value="{{datas.user_id}}" *ngFor="let datas of userALLdata">{{datas.name}}</option>
                  </select>
              </div>
                 <div class="pt102">
                   <input type="text" class="input wid100" name="reference_number"
                    id="reference_number" placeholder="Refrence No."
                    [(ngModel)]="model.reference_number">
              </div>
               <div class="pt102">
                <input type="Date" class="input wid100" name="sale_date" placeholder="Date*"
          [(ngModel)]="model.sale_date" #purchase_date="ngModel"
          (change)="validateFutureDate($event)" required>
              </div>
               <div class="pt102">
                   <select class="select wid100" name="payment_status" id="payment_status" 
                   [(ngModel)]="model.payment_status" required>
                    <option value="">Payment Status*</option>
                    <!-- <option value="Due">Due</option> -->
                    <option value="Pending"> Pending</option>
                    <option value="Paid">Paid</option>
                  </select>
              </div>
              <div class="pt102">
                <input type="File" class="input wid100" name="billImageFile" placeholder="Date*" id="billImageFile"
               style="margin-top:8px;"
                [(ngModel)]="model.bill_image_url" accept=".gif, .jpg, .png, .doc,.svg,.pdf,.csv|image/*">
              </div>
              <div class="pt102">
                <textarea class="input wid100 textarea1" name="description" id="description" placeholder="Description"
                [(ngModel)]="model.description"></textarea>
              </div>
        </div>
       <div  class="div_2">
          <div class="heading1 ">
            <p>Sale Item</p>
          </div>
            <div class="pt102">
                  <select class="select sel1 mr10" id="category_id" name="category_id"
                  (change)="getItemAgainstCat($event.target.value)">
                    <option value="">Category*</option>
                    <option value="{{data.category_id}}" *ngFor="let data of categoryAllData">{{data.category_name}}</option>
                  </select>
                  <select class="select sel1 mr10" name="item_id" id="category_id" (ngModelChange)="getItemData($event)"
                  ngModel #item_id="ngModel">
                    <option value="" selected>Item Name*</option>
                    <option value="{{data.item_id}}" *ngFor="let data of itemArray">
                      {{data.item_name}}</option>
                  </select>
            </div>
           <div class="sale_add">
              <div class="tablehead">
              <div>
                Item
              </div>
              <div>
                Sale Type
              </div>
              <div>
                Unit Price
              </div>
              <div>
                Units
              </div>
              <div>
                Taxes
              </div>
              <div>
                Subtotal
              </div>
              <div>
                Actions
              </div>
            </div>
            <div class="tablebody"*ngFor="let data of itemData;let i=index">
              <div>
                {{data.item_name}}
              </div>
              <div>
                <select class="input wid80" [name]="'sale_type' +i " [id]="'sale_type' +i" 
                [(ngModel)]="data.sale_type"
                (ngModelChange)="purchaselistItem()">
           
                  <option value="Paid" selected>Paid</option>
                  <option value="Free">Free</option>
                </select>
              </div>
              <div>
              <input type="text" [name]="'unit'+i" [id]="'unit'+i" [(ngModel)]="data.unit_cost"
                onkeypress=" return (event.charCode >= 48 && event.charCode <= 57)" 
                (keyup)="purchaselistItem()"
                 class="input wid80"
               >
               
              </div>
              <div>
                <input type="text" [name]="'unitsj'+i" [id]="'unitsj'+i" 
                [(ngModel)]="data.available_units"
                (keyup)="purchaselistItem()"
                  onkeypress=" return (event.charCode >= 48 && event.charCode <= 57)" 
                  class="input wid80"
                  >
              </div>
              <div>
                <input type="text" [name]="'quantity'+i" [id]="'quantity'+i" readonly
                [(ngModel)]="data.tax_percent"
                (ngModelChange)="purchaselistItem()"
                  onkeypress=" return (event.charCode >= 48 && event.charCode <= 57)" 
                  class="input wid80"
                  >
              </div>
              <div >
              <span *ngIf="data.unit_price !=0">{{data.subtotal}}</span>  
             <sapn *ngIf="data.unit_price==0">0</sapn>
            </div>
                <div>
                <!-- <a (click)="editdata(data)"><img src="../../../../assets/img1/edit.svg" title="Edit"
                  class="group18 mr10"></a> -->
              <a (click)="deleteItemData(i)"><img src="../../../../assets/img1/delete.svg" title="Delete" class="group18"></a>
              </div>
            </div>
           
            <div class="tabletotal" *ngIf="isChange">
              <div>
                
              </div>
               <div>
                
              </div>
              <div>
               Total
              </div>
              <div>
                {{totalUnits}}
              </div>
              <div>
                {{total}}
              </div>
              <div>
              </div>
            </div>
           </div>
       </div>
      </div>
      </form>
       <div class="white bottom_button bottom_pagignation">
        <div class="display w98">
          <div> <button class="blue_button cancel" routerLink="/view/inventory-management/sale-item">Back </button>
          </div>
          <div style="margin-bottom: 10px;">
            <button class="blue_button" (click)="saveSaleDetails()" *ngIf="!isedit">Save</button>
            <button class="blue_button" (click)="updateSaleData()" *ngIf="isedit">Update</button>
          </div>
        </div>
      <!-- pagignation div -->
      
    </div>
     
          <!-- use image only when page is empty,table body class element will not be present -->

</div> 
  <div class="modal" id="addpayModal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title" >Add Payment</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="flex">
            <div class="sec1">
              <div class="pt10">
                  <input type="Date" class="input wid100" name="" placeholder="Date*">
              </div>
              <div class="pt10">
                  <select class="select wid100">
                    <option>Payment Method*</option>
                  </select>
              </div>
              <div class="pt10">
                  <input type="File" class="input wid100" name="" placeholder="Date*">
              </div>
            </div>
            <div class="sec2">
              <div class="pt10">
                  <input type="text" class="input wid100" name="" placeholder="Refrence No.">
              </div>
              <div class="pt10">
                  <input type="text" class="input wid100" name="" placeholder="Amount*">
              </div>
             
            </div>
          </div>
          <div class="pt10">
            <button class="right blue_button">Save</button>
          </div>
        </div>        
      </div>
    </div>
  </div>
  
