<loaders-css [loader]="'ball-scale-ripple-multiple'" class="app-loader-wrapper" [loaderClass]="'blueRipple'" *ngIf="isRippleLoad">
</loaders-css>
<section class="middle-section">

    <section class="exam-schedule">

        <div class="heading-section">
            <h1>
                Exam Schedule
            </h1>
        </div>

        <div class="common-search-filter">

            <div *ngIf="isLangInstitute">
                <div class="row">
                    <div class="c-sm-3 c-md-3 c-lg-3">
                        <div class="field-wrapper" [ngClass]="{'has-value': batchData.standard_id != '-1'}">
                            <select id="ddnMAsterCourse" name="ddnMAsterCourse" class="form-ctrl" [(ngModel)]="batchData.standard_id" (ngModelChange)="onBatchMasterCourseSelection($event)">
                                <option value="-1"></option>
                                <option [value]="master.standard_id" *ngFor="let  master of masterCourseList">
                                    {{master.standard_name}}
                                </option>
                            </select>
                            <label for="ddnMAsterCourse">Select Master Course</label>
                        </div>
                    </div>
                    <div class="c-sm-3 c-md-3 c-lg-3">
                        <div class="field-wrapper" [ngClass]="{'has-value': batchData.subject_id != '-1'}">
                            <select id="ddnMAsterCourse" name="ddnMAsterCourse" class="form-ctrl" [(ngModel)]="batchData.subject_id" (ngModelChange)="onBatchCourseSelection($event)">
                                <option value="-1"></option>
                                <option [value]="master.subject_id" *ngFor="let  master of courseList">
                                    {{master.subject_name}}
                                </option>
                            </select>
                            <label for="ddnMAsterCourse">Select Master Course</label>
                        </div>
                    </div>
                    <div class="c-sm-3 c-md-3 c-lg-3">
                        <div class="field-wrapper" [ngClass]="{'has-value': batchData.batch_id != '-1'}">
                            <select id="sc" class="form-ctrl" [(ngModel)]="batchData.batch_id">
                                <option value="-1"></option>
                                <option [value]="subject.batch_id" *ngFor="let subject of batchesList">
                                    {{subject.batch_name}}
                                </option>
                            </select>
                            <label for="sc">Batch</label>
                        </div>
                    </div>
                    <div class="c-sm-3 c-md-3 c-lg-3">
                        <button class="btn fullBlue" (click)="batchModelGoClick()">Go</button>
                    </div>
                </div>

            </div>

            <div *ngIf="!isLangInstitute">

            </div>

            <div class="row batchTimeDet" *ngIf="showContentSection">
                <div class="c-sm-3 c-md-3 c-lg-3">
                </div>

                <div class="c-sm-6 c-md-6 c-lg-6">
                    <span>Batch Start Date : {{batchStartDate}}</span>
                    &emsp;
                    <span>Batch End Date : {{batchEndDate}} </span>
                </div>

                <div class="c-sm-3 c-md-3 c-lg-3">
                </div>

            </div>

        </div>

        <div class="content-section" *ngIf="showContentSection">

            <h3>Schedule</h3>

            <div *ngIf="isLangInstitute" class="langModelCss">

                <div class="row examAdder">

                    <div class="c-lg-2 c-md-2 c-sm-2">
                        <div class="form-wrapper datePickerBox">
                            <label for="csd">Date
                                <span style="color:red">*</span>
                            </label>
                            <input type="text" value="" id="csd" class="side-form-ctrl bsDatepicker" [(ngModel)]="batchAdderData.exam_date" readonly="true"
                                name="csd" bsDatepicker>
                        </div>
                    </div>

                    <div class="c-sm-2 c-lg-2 c-md-2">

                        <div class="form-wrapper timepick">
                            <label for="startTime">Start Time</label>
                            <div class="tbox">
                                <div class="times">
                                    <select id="" class="mins side-form-ctrl" [(ngModel)]="batchAdderData.start_time.hour" name="startTime">
                                        <option [value]="time" *ngFor="let time of times">
                                            {{time}}
                                        </option>
                                    </select>
                                </div>
                                <div class="times">
                                    <select id="" class="mers side-form-ctrl" [(ngModel)]="batchAdderData.start_time.minute" name="minute">
                                        <option *ngFor="let minute of minArr" [value]="minute">
                                            {{minute}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="c-sm-2 c-lg-2 c-md-2">

                        <div class="form-wrapper timepick">
                            <label for="startTime">End Time</label>
                            <div class="tbox">
                                <div class="times">
                                    <select id="" class="mins side-form-ctrl" [(ngModel)]="batchAdderData.end_time.hour" name="startTime">
                                        <option [value]="time" *ngFor="let time of times">
                                            {{time}}
                                        </option>
                                    </select>
                                </div>
                                <div class="times">
                                    <select id="" class="mers side-form-ctrl" [(ngModel)]="batchAdderData.end_time.minute" name="minute">
                                        <option *ngFor="let minute of minArr" [value]="minute">
                                            {{minute}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="c-sm-2 c-lg-2 c-md-2">
                        <div class="form-wrapper">
                            <label for="customDescTxt">Description</label>
                            <textarea class="side-form-ctrl" [(ngModel)]="batchAdderData.exam_desc" id="customDescTxt" name="customDescTxt"></textarea>
                        </div>
                    </div>

                    <div class="c-sm-2 c-lg-2 c-md-2">
                        <div class="form-wrapper">
                            <label for="inpTotalMarks">Total Marks</label>
                            <input type="number" class="side-form-ctrl" [(ngModel)]="batchAdderData.total_marks">
                        </div>
                    </div>

                    <div class="">
                        <button class="btn fullBlue" (click)="addNewExamSchedule()">Add</button>
                    </div>

                </div>

                <div class="table-wrapper-Lang">
                    <div class="">
                        <table>
                            <thead>
                                <tr>
                                    <th>
                                        Date
                                    </th>
                                    <th>
                                        Start Time
                                    </th>
                                    <th>
                                        End Time
                                    </th>
                                    <th>
                                        Total Marks
                                    </th>
                                    <th>
                                        Description
                                    </th>
                                    <th>
                                        Action
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let row of examSchedule ; let i= index ; trackBy : index">
                                    <td>
                                        {{row.exam_date}}
                                    </td>
                                    <td>
                                        {{row.start_time}}
                                    </td>
                                    <td>
                                        {{row.end_time}}
                                    </td>
                                    <td>
                                        <div class="form-wrapper">
                                            <input type="text" class="side-form-ctrl torlMarksWidth" name="label" [(ngModel)]="row.total_marks">
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-wrapper">
                                            <input type="textbox" class="side-form-ctrl" name="label" [(ngModel)]="row.exam_desc">
                                        </div>
                                    </td>
                                    <td>
                                        <div class="action-Menu">
                                            <a *ngIf="row.schd_id == 0" (click)="deleteExamSchedule(row,i)">Delete</a>
                                            <a *ngIf="row.schd_id != 0" (click)="markAttendanceSchedule(row)">Mark Attendance</a>
                                            <a *ngIf="row.schd_id != 0" (click)="cancelExamSchedule(row)">Cancel Exam</a>
                                            <a *ngIf="row.schd_id != 0" (click)="notifyExamSchedule(row)">Notify</a>
                                        </div>
                                    </td>
                                </tr>
                                <tr *ngIf="examSchedule.length == 0">
                                    <td colspan="6">
                                        No Schedule OF Exam
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="row pull-right">
                    <button class="btn fullBlue" *ngIf="examScheduleData.otherSchd.length ==0" click="addDataToExamSchedule()">Add</button>
                    <button class="btn fullBlue" *ngIf="examScheduleData.otherSchd.length !=0" click="addDataToExamSchedule()">Update</button>
                </div>

                <div class="row">

                    <h3>Cancelled Exams</h3>

                    <div class="cancelClass-table">
                        <div class="">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Start Time</th>
                                        <th>End Time</th>
                                        <th>Total Marks</th>
                                        <th>Cancel Reason</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let row of cancelledSchedule ; let i= index ; trackBy : index">
                                        <td>
                                            {{row.exam_date}}
                                        </td>
                                        <td>
                                            {{row.start_time}}
                                        </td>
                                        <td>
                                            {{row.end_time}}
                                        </td>
                                        <td>
                                            {{row.total_marks}}
                                        </td>
                                        <td>
                                            {{row.exam_desc}}
                                        </td>
                                        <td>
                                            <div class="action-Menu">
                                                <a title="Send notification for cancelled exam schedule" (click)="notifyCancelClass(row)">Notify</a>
                                                <a title="Uncancel Schedule" (click)="unCancelClass(row)">Uncancel Class</a>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr *ngIf="cancelledSchedule.length ==0">
                                        <td colspan="6">
                                            No Cancelled Schedule
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

            </div>

            <div *ngIf="!isLangInstitute">

            </div>

        </div>

    </section>

</section>

<!-- ///////// POPUP/////////////////////////////////// -->
<!-- ///////// POPUP/////////////////////////////////// -->
<!-- ///////// POPUP/////////////////////////////////// -->

<!-- <section id="popup " class="popupWrapper fadeIn " *ngIf="markAttendancePopUp">
    <div class="popup pos-abs popup-body-container ">
        <div class="popup-wrapper pos-rel ">
            <span class="closePopup pos-abs fbold show " id="popupCloseBtn " (click)="closeWeeklySchedulePopup()">
                <svg xmlns="http://www.w3.org/2000/svg " viewBox="9310 2185 16 16 ">
                    <g id="Group_1228 " data-name="Group 1228 " transform="translate(8298 1888) ">
                        <g id="Group_1213 " data-name="Group 1213 " transform="translate(34.189 -7.77) ">
                            <line id="Line_274 " data-name="Line 274 " class="cls-1 " y2="19.798 " transform="translate(992.81 305.77)
                      rotate(45) " />
                            <line id="Line_275 " data-name="Line 275 " class="cls-1 " x1="19.798 " transform="translate(978.81 305.77)
                      rotate(45) " />
                        </g>
                        <rect id="Rectangle_686 " data-name="Rectangle 686 " style="stroke:none; " class="cls-2 " width="16
                      " height="16 " transform="translate(1012 297) " />
                    </g>
                </svg>
            </span>
            <div class="popup-content">
                <h2>Mark/Update Exam Attendance</h2>
                <div class="row">
                    
                </div>

                <div class="row extraMargin">
                    <div class="field-checkbox-wrapper pull-left">
                        <input type="checkbox" [(ngModel)]="weeklyScheduleCan.is_notified" name="enableSMS" class="form-checkbox" id="NotifyStusde">
                        <label for="NotifyStusde">Notify students</label>
                    </div>
                    <div class="pull-right" style="margin-right: 15px">
                        <button class="btn" (click)="closeWeeklySchedulePopup()">Close</button>
                        <button class="btn fullBlue" (click)="cancelWeeklySchedule()">Cancel Class</button>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section> -->



<!-- <proctur-widget *ngIf="markAttendancePopUp">
    <span class="closePopup pos-abs fbold show" id="popupCloseBtn" (click)="closeCourseLevelAttendance()" close-button>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="9310 2185 16 16">
            <g id="Group_1228" data-name="Group 1228" transform="translate(8298 1888)">
                <g id="Group_1213" data-name="Group 1213" transform="translate(34.189 -7.77)">
                    <line id="Line_274" data-name="Line 274" class="cls-1" y2="19.798" transform="translate(992.81
                  305.77) rotate(45)" />
                    <line id="Line_275" data-name="Line 275" class="cls-1" x1="19.798" transform="translate(978.81
                  305.77) rotate(45)" />
                </g>
                <rect id="Rectangle_686" data-name="Rectangle 686" style="stroke:none;" class="cls-2" width="16" height="16" transform="translate(1012 297)"
                />
            </g>
        </svg>
    </span>
    <h2 widget-header>Mark/Update Exam Attendance</h2>

    <div class="attendanceWrapperCourse" widget-content>

        <div class="row filterSection">
            <div class="c-sm-3 c-md-3 c-lg-3">
                <h3>Total Students : {{studentList.length}} </h3>
            </div>

            <div class="c-sm-6 c-md-6 c-lg-6">

                <span class="leave">{{leaveCount}}</span>
                <h5>Leave</h5>

                <span class="absent">{{absentCount}}</span>
                <h5>Absent</h5>

                <span class="present">{{presentCount}}</span>
                <h5>Present</h5>
            </div>

        </div>

        <div class="attendanceMain">
            <div class="table-scroll-wrapper">
                <div class="table table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th style="font-size: 14px;font-weight: 600;">Student Id</th>
                                <th style="font-size: 14px;font-weight: 600;">Student Name</th>
                                <th style="font-size: 14px;font-weight: 600;">Attendance</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let s of studentList; let i=index;">
                                <td>
                                    {{s.student_disp_id}}
                                </td>
                                <td>
                                    {{s.student_name}}
                                </td>
                                <td>
                                    <div class="btnGroup">
                                        <button id="leaveBtnCourse{{s.student_id}}" [disabled]="getDisability(s)" (click)="markAttendaceBtnClickCourse($event , s , i)"
                                            class="btn" [ngClass]="getClassForLeave(s)">L</button>
                                        <button id="absentBtnCourse{{s.student_id}}" [disabled]="getDisability(s)" (click)="markAttendaceBtnClickCourse($event , s, i)"
                                            class="btn" [ngClass]="getClassForAbsent(s)">A</button>
                                        <button id="presentBtnCourse{{s.student_id}}" [disabled]="getDisability(s)" (click)="markAttendaceBtnClickCourse($event , s, i)"
                                            class="btn" [ngClass]="getClassForPresent(s)">P</button>
                                    </div>
                                </td>

                            </tr>
                            <tr *ngIf="studentList.length == 0">
                                <td colspan="3">
                                    No Students Record
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="" widget-footer>
        <div class="clearfix" style="padding-top: 15px">
            <aside class="pull-right popup-btn">
                <input type="button" value="Cancel" class="btn" (click)="closeCourseLevelAttendance()">
                <input type="button" value="Mark Attendance" (click)="updateCourseAttendance()" class="fullBlue btn">
            </aside>
        </div>
    </div>
</proctur-widget> -->