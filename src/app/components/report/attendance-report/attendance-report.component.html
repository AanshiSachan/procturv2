<div class="middle-section clear-fix">
    <aside class="middle-full">
        <section class="middle-main clearFix">
            <section class="middle-top mb0 clearFix sms-header">
                <h2 class="pull-left">
                    Attendance Report
                </h2>
                <aside class="pull-right">
                </aside>
            </section>
            <div class="row">
                <div class="c-sm-4 c-xs-4 c-lg-4 c-md-4 form-wrapper" *ngIf=!isProfessional>
                    <label>Master Course</label>
                    <select class="side-form-ctrl" [(ngModel)]="getData.master_course_name" (ngModelChange)="getCourseData($event)" name="masterCourse">
                        <option value="" selected>Master Course</option>
                        <option *ngFor="let i of masterCourses" [value]="i.master_course">{{i.master_course}}</option>

                    </select>
                </div>
                <div class="c-sm-4 c-xs-4 c-lg-4 c-md-4 form-wrapper" *ngIf=isProfessional>
                    <label>Master Course</label>
                    <select class="side-form-ctrl" [(ngModel)]="queryParams.standard_id" (ngModelChange)="getCourseData($event)" name="masterCourse">
                        <option value="" selected>Master Course</option>
                        <option *ngFor="let i of masterCoursePro" [value]="i.standard_id">{{i.standard_name}}</option>

                    </select>
                </div>
                <div class="c-sm-4 c-xs-4 c-lg-4 c-md-4 form-wrapper" *ngIf=!isProfessional>
                    <label> Course</label>
                    <select class="side-form-ctrl" [(ngModel)]="getData.course_id" (ngModelChange)="getSubjectData($event)">
                        <option value="" selected>Course</option>
                        <option *ngFor="let i of courses" [value]="i.course_id" name="subjectCourse">{{i.course_name}}</option>
                    </select>
                </div>
                <div class="c-sm-4 c-xs-4 c-lg-4 c-md-4 form-wrapper" *ngIf="isProfessional">
                    <label> Course</label>
                    <select class="side-form-ctrl" [(ngModel)]="queryParams.course_id" (ngModelChange)="getSubjectData($event)">
                        <option value="" selected>Course</option>
                        <option *ngFor="let i of subjectPro" [value]="i.subject_id" name="subjectCourse">{{i.subject_name}}</option>
                    </select>
                </div>
                <div class="c-sm-4 c-xs-4 c-lg-4 c-md-4 form-wrapper" *ngIf=!isProfessional>
                    <label>Batch Name</label>
                    <select class="side-form-ctrl" [(ngModel)]="getData.batch_id" (ngModelChange)="getBatchData($event)">
                        <option value="" selected>Subject</option>
                        <option *ngFor="let i of batchCourses" [value]="i.batch_id" name="batchCourse">{{i.batch_name}}</option>
                    </select>
                </div>
                <div class="c-sm-4 c-xs-4 c-lg-4 c-md-4 form-wrapper" *ngIf=isProfessional >
                    <label>Batch Name</label>
                    <select class="side-form-ctrl" [(ngModel)]="queryParams.subject_id">
                        <option value="" selected>Batch Course</option>
                        <option *ngFor="let i of batchPro" [value]="i.batch_id" name="batchCourse">{{i.batch_name}}</option>
                    </select>
                </div>
                <div class="row">
                    <div class="c-sm-4 c-md-4 c-xs-4 c-lg-4 form-wrapper datePickerBox has-value">
                        <label>From date</label>
                        <input type="text" class="side-form-ctrl  bsDatepicker" [(ngModel)]="getData.from_date" bsDatepicker/>
                    </div>
                    <div class="c-sm-4 c-md-4 c-xs-4 c-lg-4 form-wrapper">
                        <label>To date</label>
                        <input type="text" class="side-form-ctrl  bsDatepicker" [(ngModel)]="getData.to_date" bsDatepicker/>
                    </div>
                    <div class="c-sm-4 c-md-4 c-xs-4 c-lg-4 form-wrapper datePickerBox has-value">
                        <button class="btn" (click)="getPostData()">Summary Report</button>
                        <button class="btn" (click)="postDetails()">Detail Report</button>
                    </div>
                </div>
            </div>
            <div class="table-body" *ngIf="SummaryReports">
                <div class="filter-box clearFix">

                    <div id="basic-search" class="search-filter-wrapper">
                        <input #search type="text" class="normal-field" placeholder="Search" style="font-size:12px; margin: 0px 5px 0px -5px;" [(ngModel)]="pagedPostData.student_name"
                            name="searchData" (keyup.enter)="searchDatabase()">
                    </div>

                </div>
                <div class="table-content">
                    <div class="table-heading">
                        <proctur-table [records]="pagedPostData | lockFilter : pagedPostData.student_name : pagedPostData.student_id :pagedPostData.student_phone : pagedPostData.doj : spent_percentage | sortPipe : pagedPostData.student_name"
                            [tableName]="'sms'" [settings]="projectSettings">
                        </proctur-table>
                    </div>
                    <!-- Paginator Here -->
                    <div class="row filter-res pagination" style="width: 100%;">
                        <div class="c-lg-12 c-md-12 c-sm-12 align-right">
                            <pagination (goPage)="fetchTableDataByPage($event)" (goNext)="fetchNext()" (goPrev)="fetchPrevious()" [pagesToShow]="10"
                                [page]="PageIndex" [perPage]="pagedisplaysize" [count]="totalRow">
                            </pagination>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </aside>

    <!--popup here-->
    <!-- <section id="popup" class="popupWrapper fadeIn" *ngIf="addReportPopUp">
        <div class="popup pos-abs popup-body-container">
            <div class="popup-wrapper pos-rel">
                <span class="closePopup pos-abs fbold show" id="popupCloseBtn" (click)="closeReportPopup()">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="9310 2185 16 16">
                        <g id="Group_1228" data-name="Group 1228" transform="translate(8298 1888)">
                            <g id="Group_1213" data-name="Group 1213" transform="translate(34.189 -7.77)">
                                <line id="Line_274" data-name="Line 274" class="cls-1" y2="19.798" transform="translate(992.81 305.77) rotate(45)" />
                                <line id="Line_275" data-name="Line 275" class="cls-1" x1="19.798" transform="translate(978.81 305.77) rotate(45)" />
                            </g>
                            <rect id="Rectangle_686" data-name="Rectangle 686" style="stroke:none;" class="cls-2" width="16" height="16" transform="translate(1012 297)"
                            />
                        </g>
                    </svg>
                </span>
                <div class="popup-content student-assign-popup">
                    <h2>Date Wise Attendance Report</h2>
                    <h5>({{attendanceIndex0.class_date}} to {{attendanceIndexiOf.class_date}})</h5>

                    <table>
                        <thead>
                            <tr>
                                <th>
                                    Student Id
                                </th>
                                <th>
                                    Student Name
                                </th>
                                <th>
                                    Total Present
                                </th>
                                <th>
                                    Total absent
                                </th>
                                <th>
                                    Total leave
                                </th>
                                <th *ngFor="let k of typeAttendance">
                                    {{k.class_date}}
                                    <br> ({{k.start_time}}) to ({{k.end_time}})
                                </th>
                                <th>
                                    Percentage
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let i of pageDetailedData; let j=index">
                                <td>
                                    {{i.student_id}}
                                </td>
                                <td>
                                    {{i.student_name}}
                                </td>
                                <td>
                                    {{i.total_attended}}
                                </td>
                                <td>
                                    {{i.total_absent}}
                                </td>
                                <td>
                                    {{i.total_leave}}
                                </td>
                                <td *ngFor="let k of typeAttendance">
                                    {{k.status}}
                                </td>
                                <td>
                                    {{i.spent_percentage}}%
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="row filter-res pagination" style="width: 100%;">
                        <div class="c-lg-12 c-md-12 c-sm-12 align-right">
                            <pagination (goPage)="fetchTableDataByPagePopup($event)" (goNext)="fetchNextPopup()" (goPrev)="fetchPreviousPopup()" [pagesToShow]="10"
                                [page]="PageIndex" [perPage]="studentdisplaysize" [count]="totalRow">
                            </pagination>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section> -->

    <proctur-popup [sizeWidth]="'large'" *ngIf="addReportPopUp">

        <span class="closePopup pos-abs fbold show" (click)="closeReportPopup()" close-button>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="9310 2185 16 16">
                <g id="Group_1228" data-name="Group 1228" transform="translate(8298 1888)">
                    <g id="Group_1213" data-name="Group 1213" transform="translate(34.189 -7.77)">
                        <line id="Line_274" data-name="Line 274" class="cls-1" y2="19.798" transform="translate(992.81 305.77) rotate(45)" />
                        <line id="Line_275" data-name="Line 275" class="cls-1" x1="19.798" transform="translate(978.81 305.77) rotate(45)" />
                    </g>
                    <rect id="Rectangle_686" data-name="Rectangle 686" style="stroke:none;" class="cls-2" width="16" height="16" transform="translate(1012 297)"/>
                </g>
            </svg>
        </span>

        <div popup-header class="popup-header-content">
            <h2>Date Wise Attendance Report</h2>
            <h5>({{attendanceIndex0.class_date}} to {{attendanceIndexiOf.class_date}})</h5>
        </div>

        <div popup-content class="main-student-table">

            <div class="table table-responsive student-table">
                <table>
                    <thead>
                        <tr>
                            <th>
                                Student Id
                            </th>
                            <th>
                                Student Name
                            </th>
                            <th>
                                Total Present
                            </th>

                            <th>
                                Total absent
                            </th>
                            <th>
                                Total leave
                            </th>
                            <th *ngFor="let k of typeAttendance">
                                {{k.class_date}}
                                <br> ({{k.start_time}}) to ({{k.end_time}})
                            </th>
                            <th>
                                Percentage
                            </th>
                        </tr>
                    </thead>
                    <tbody>

                        <tr *ngFor="let i of pageDetailedData; let j=index">
                            <td>
                                {{i.student_id}}
                            </td>
                            <td>
                                {{i.student_name}}
                            </td>
                            <td>
                                {{i.total_attended}}
                            </td>
                            <td>
                                {{i.total_absent}}
                            </td>
                            <td>
                                {{i.total_leave}}
                            </td>
                            <td *ngFor="let k of typeAttendance">
                                {{k.status}}
                            </td>
                            <td>
                                {{i.spent_percentage}}%
                            </td>
                        </tr>
                        <tr *ngIf="pageDetailedData.length == 0">
                            <td>
                                No Records Found
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div class="row filter-res pagination" style="width: 100%;">
                    <div class="c-lg-12 c-md-12 c-sm-12 align-right">
                        <pagination (goPage)="fetchTableDataByPagePopup($event)" (goNext)="fetchNextPopup()" (goPrev)="fetchPreviousPopup()" [pagesToShow]="10"
                            [page]="PageIndexPopup" [perPage]="pagedisplaysizePopup" [count]="totalRowPopup">
                        </pagination>
                    </div>
                </div>
            </div>
        </div>

    </proctur-popup>

</div>