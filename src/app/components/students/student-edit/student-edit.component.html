<loaders-css [loader]="'ball-scale-ripple-multiple'" class="app-loader-wrapper" [loaderClass]="'blueRipple'" *ngIf="isRippleLoad">
</loaders-css>

<section class="middle-section homewrap clearFix">
  <a id="payMultiReciept" class="hide"></a>
  <!-- ======================================================== -->
  <!-- ======================================================== -->
  <section class="scroll-content" id="studentFlow">
    <!-- ======================================================== -->
    <!-- =====================  Form Navigations================= -->
    <section class="student-tab">
      <ul class="nav-tab">
        <li id="li-one" class="active">
          <div class="navigator" id="studentForm-icon">
            <span id="studentForm-icon">1</span>
            <p id="studentForm-icon">Personal Details</p>
          </div>
        </li>
        <li class="" id="li-two">
          <div class="navigator" id="kyc-icon">
            <span id="kyc-icon">2</span>
            <p id="kyc-icon">Other Details</p>
          </div>
        </li>
        <li class="" id="li-three" [class.hide]="quickAddStudent">
          <div class="navigator" id="feeDetails-icon">
            <span id="feeDetails-icon">3</span>
            <p id="feeDetails-icon">Fee Details</p>
          </div>
        </li>
        <li class="" id="li-four" [class.hide]="quickAddStudent">
          <div class="navigator" id="inventory-icon">
            <span id="inventory-icon">4</span>
            <p id="inventory-icon">Inventory</p>
          </div>
        </li>
      </ul>
    </section>
    <!-- ======================================================== -->
    <!-- ======================================================== -->
    <!-- ========Student Main Enquiry Form ====================== -->
    <form #values="ngForm" (ngSubmit)="studentQuickAdder(values)">
      <!-- ======================================================== -->
      <!-- ======================================================== -->
      <section class="student-flow-wrapper boxPadding15" *ngIf="isBasicActive" id="studentForm">
        <!-- Form Header -->
        <section class="middle-top clearFix">
          <h1 class="pull-left">
            Personal Details
          </h1>
          <aside class="pull-right">
          </aside>
        </section>
        <!-- Main Enquiry Form -->
        <section class="clearFix student-flow  row" id="studentFlow">

          <aside class="pull-left middle-left">

            <!-- Form 1 -->
            <div class="row">
              <div class="c-lg-8 c-md-8 c-sm-8">
                <div class="form-type1">
                  <div class="field-wrapper" [ngClass]="{'has-value': studentAddFormData.student_name != ''}">
                    <label for="sName">Student Name*</label>
                    <input type="text" value="" class="form-ctrl" id="sName" [(ngModel)]="studentAddFormData.student_name"
                      name="sName" maxlength="50" pattern="[a-zA-Z .]+[a-zA-Z .]+" #sname="ngModel" required>
                    <div *ngIf="sname.invalid && (sname.dirty || sname.touched)" class="alert invalid-alert">
                      <div *ngIf="sname.errors.required">
                        name is required.
                      </div>
                      <div *ngIf="sname.errors.pattern">
                        name cannot have special characters or numbers.
                      </div>
                    </div>
                  </div>

                  <div class="field-wrapper" [ngClass]="{'has-value': studentAddFormData.student_phone != ''}">
                    <label for="cNumber">Contact Number*</label>
                    <input type="text" value="" id="cNumber" class="form-ctrl" [(ngModel)]="studentAddFormData.student_phone"
                      name="cNumber" maxlength="10" minlength="10" #cNumber="ngModel" onkeypress="return (event.charCode >= 48 && event.charCode <= 57)"
                      required />
                    <div *ngIf="cNumber.invalid && (cNumber.dirty || cNumber.touched)" class="alert invalid-alert">
                      <div *ngIf="cNumber.errors.required">
                        phone number is required.
                      </div>
                    </div>
                  </div>

                  <div class="field-wrapper" [ngClass]="{'has-value': studentAddFormData.student_email != ''}">
                    <label for="sEmail">Email ID</label>
                    <input type="text" value="" id="sEmail" class="form-ctrl" [(ngModel)]="studentAddFormData.student_email"
                      name="sEmail" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" #sEmail="ngModel" />
                    <div *ngIf="sEmail.invalid && (sEmail.dirty || sEmail.touched)" class="alert invalid-alert">
                      <div *ngIf="sEmail.errors.pattern">
                        Enter email in format eg. someone@xyz.com
                      </div>
                    </div>
                  </div>

                  <div class="field-wrapper" *ngIf="enableBiometric == '1'" [ngClass]="{'has-value': studentAddFormData.attendance_device_id != ''}">
                    <label for="attCard">Attendance Card ID</label>
                    <input type="text" value="" id="cardId" class="form-ctrl" [(ngModel)]="studentAddFormData.attendance_device_id"
                      name="attCard" #cardId="ngModel" />
                  </div>


                  <div *ngIf="isManualDisplayId" class="field-wrapper" [ngClass]="{'has-value': studentAddFormData.student_disp_id != ''}">
                    <label for="manualId">Student Roll Number*</label>
                    <input type="text" value="" class="form-ctrl" id="manualId" [(ngModel)]="studentAddFormData.student_disp_id"
                      name="manualId" maxlength="50" #manualId="ngModel" required>
                    <div *ngIf="manualId.invalid && (manualId.dirty || manualId.touched)" class="alert invalid-alert">
                      <div *ngIf="manualId.errors.required">
                        Roll Number is Mandatory.
                      </div>
                    </div>
                  </div>


                  <div class="field-wrapper" [ngClass]="{'has-value': studentAddFormData.student_sex != ''}">
                    <label for="userGender">Gender</label>
                    <select id="userGender" class="form-ctrl" [(ngModel)]="studentAddFormData.student_sex" name="userGender">
                      <option value="M" selected>Male</option>
                      <option value="F">Female</option>
                      <option value="Na">NA</option>
                    </select>
                  </div>

                  <div class="field-wrapper" [ngClass]="{'has-value': studentAddFormData.parent_name != ''}">
                    <label for="parentName">Parent Name</label>
                    <input type="text" value="" id="parentName" class="form-ctrl" [(ngModel)]="studentAddFormData.parent_name"
                      name="parentName" maxlength="50" pattern="[a-zA-Z .]+[a-zA-Z .]+" #parentName="ngModel">
                    <div *ngIf="parentName.invalid && (parentName.dirty || parentName.touched)" class="alert invalid-alert">
                      <div *ngIf="parentName.errors.pattern">
                        Name cannot have number / special characters except '.'
                      </div>
                    </div>
                  </div>

                  <div class="field-wrapper" [ngClass]="{'has-value': studentAddFormData.parent_phone != ''}">
                    <label for="parentContactNo">Parent Contact Number</label>
                    <input type="text" value="" id="parentContactNo" class="form-ctrl" [(ngModel)]="studentAddFormData.parent_phone"
                      name="parentContactNo" maxlength="10" minlength="10" onkeypress="return (event.charCode >= 48 && event.charCode <= 57)"
                      #parentContactNo="ngModel" />
                  </div>

                  <div class="field-wrapper" [ngClass]="{'has-value': studentAddFormData.parent_email != ''}">
                    <label for="parentEmail">Parent Email ID</label>
                    <input type="text" value="" id="parentEmail" class="form-ctrl" [(ngModel)]="studentAddFormData.parent_email"
                      name="parentEmail" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" #parentEmail="ngModel">
                    <div *ngIf="parentEmail.invalid && (parentEmail.dirty || parentEmail.touched)" class="alert invalid-alert">
                      <div *ngIf="parentEmail.errors.pattern">
                        Enter email in format eg. someone@xyz.com
                      </div>
                    </div>
                  </div>

                  <div class="more-detail">
                    <a *ngIf="!additionalBasicDetails" style="cursor:pointer" (click)="toggleAdditionalBasicDetails()">+
                      &nbsp; Add Additional Details</a>
                    <a *ngIf="additionalBasicDetails" style="cursor:pointer" (click)="toggleAdditionalBasicDetails()">-
                      &nbsp;
                      Hide Additional Details</a>
                  </div>

                </div>
              </div>
              <div class="c-lg-4 c-md-4 c-sm-4">
                <proctur-image [containerWidth]="containerWidth" [serverImg]="studentServerImage" (setImage)="setImage($event)"
                  [thumbnailAvailable]="thumbnailAvailable">
                </proctur-image>
              </div>
            </div>
            <!-- Form 2 -->
            <div class="row">
              <div class="c-lg-12 c-md-12 c-sm-12">
                <div class="form-type2" [hidden]="!additionalBasicDetails">
                  <h2>Additional Details</h2>

                  <div class="field-wrapper datePickerBox" [ngClass]="{'has-value': studentAddFormData.dob != ''}">
                    <label for="sdob">Date of Birth</label>
                    <input type="text" value="" id="sdob" class="form-ctrl bsDatepicker" name="sdob" [(ngModel)]="studentAddFormData.dob"
                      #sdob="ngModel" readonly="true" bsDatepicker>
                  </div>

                  <div class="field-wrapper" [ngClass]="{'has-value': studentAddFormData.student_curr_addr != ''}">
                    <label for="currentAdd">Current Address Line1</label>
                    <input type="text" value="" id="currentAdd" name="currentAdd" [(ngModel)]="studentAddFormData.student_curr_addr"
                      class="form-ctrl">
                  </div>

                  <div class="field-wrapper" [ngClass]="{'has-value': studentAddFormData.guardian_name != ''}">
                    <label for="guardianName">Guardian Name</label>
                    <input type="text" value="" id="guardianName" class="form-ctrl" maxlength="50" pattern="[a-zA-Z .]+[a-zA-Z .]+"
                      name="guardianName" [(ngModel)]="studentAddFormData.guardian_name" #guardianName="ngModel" />
                    <div *ngIf="guardianName.invalid && (guardianName.dirty || guardianName.touched)" class="alert invalid-alert">
                      <div *ngIf="guardianName.errors.pattern">
                        Name cannot have number / special characters except '.'
                      </div>
                    </div>
                  </div>

                  <div class="field-wrapper" [ngClass]="{'has-value': studentAddFormData.guardian_phone != ''}">
                    <label for="guardianContact">Guardian Contact Number</label>
                    <input type="text" value="" id="guardianContact" class="form-ctrl" maxlength="10" minlength="10"
                      [(ngModel)]="studentAddFormData.guardian_phone" name="guardianContact" onkeypress="return (event.charCode >= 48 && event.charCode <= 57)"
                      #guardianContact="ngModel">
                    <div class="questionInfo pos-rel">
                      <span class="qInfoIcon">?</span>
                      <div class="tooltip-box-field">
                        Details of guardian, in case parents are not reachable
                      </div>
                    </div>
                  </div>

                  <div class="field-wrapper" [ngClass]="{'has-value': studentAddFormData.guardian_email != ''}">
                    <label for="guardianEmail">Guardian Email Id</label>
                    <input type="text" value="" id="guardianEmail" class="form-ctrl" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$"
                      name="guardianEmail" [(ngModel)]="studentAddFormData.guardian_email" #guardianEmail="ngModel" />
                    <div *ngIf="guardianEmail.invalid && (guardianEmail.dirty || guardianEmail.touched)" class="alert invalid-alert">
                      <div *ngIf="guardianEmail.errors.pattern">
                        please enter a valid email ID.
                      </div>
                    </div>
                  </div>

                  <div class="field-wrapper" [ngClass]="{'has-value': studentAddFormData.comments != ''}">
                    <label for="addCommentNote">Add Comment Note</label>
                    <input type="text" value="" name="addCommentNote" [(ngModel)]="studentAddFormData.comments" id="addCommentNote"
                      class="form-ctrl">
                  </div>

                </div>
              </div>
            </div>

          </aside>

          <aside class="pull-right middle-right" id="studentRightSideBar">
            <div class="common-right-section">
            </div>
            <!-- Enquiry Details official use-->
            <section class="enquiry-detail common-right-section">
              <h4>
                <strong>Administration Details</strong> (Official Use)
              </h4>
              <div style="min-height: 345px;" class="box-shadow-lite">
                <div class="field-wrapper datePickerBox has-value" [ngClass]="{'has-value': studentAddFormData.doj != ''}">
                  <label for="doj">Date of Admission</label>
                  <input type="text" value="" id="doj" class="form-ctrl bsDatepicker" readonly="true" bsDatepicker name="doj"
                    [(ngModel)]="studentAddFormData.doj" />
                  <!-- <span class="date-clear" name="doj" (click)="clearDateoJoining()">clear</span> -->
                </div>

                <div class="field-wrapper" [ngClass]="{'has-value': studentAddFormData.school_name != '-1'}">
                  <label for="schoolStitution">School/Institution</label>
                  <select id="schoolStitution" name="schoolStitution" [(ngModel)]="studentAddFormData.school_name"
                    class="form-ctrl">
                    <option value="-1"></option>
                    <option [value]="institute.school_id" *ngFor="let institute of instituteList">
                      {{institute.school_name}}
                    </option>
                  </select>
                  <span class="open-accor" (click)="openInstituteAdder()">+</span>
                </div>

                <!-- ================================================================= -->
                <!-- ================================================================= -->
                <!-- Academic Model For student Update -->
                <div class="field-wrapper" *ngIf="isAcad" [ngClass]="{'has-value': studentAddFormData.student_class != ''}">
                  <label for="standard">Standards</label>
                  <select id="standard" [(ngModel)]="studentAddFormData.standard_id" name="standard" class="form-ctrl">
                    <option value="-1"></option>
                    <option [value]="standard.standard_id" *ngFor="let standard of standardList">
                      {{standard.standard_name}}
                    </option>
                  </select>
                </div>



                <div id="assignCoursesParent" class="form-wrapper field-view" *ngIf="isAcad" (click)="openAssignBatch()">
                  <label (click)="openAssignBatch()" for="assignCourses">
                  </label>
                  <textarea style="height:107px;margin-left:-9px; background: #efefef;padding:5px;margin-top:0px"
                    [ngModel]="assignedBatchString" placeholder="Assign Courses" name="assignCourses" class="form-ctrl"
                    readonly="true"></textarea>
                  <a style="cursor:pointer" (click)="openAssignBatch()">Assign Courses</a>
                </div>

                <!-- ================================================================= -->
                <!-- ================================================================= -->
                <!-- Professional Model For student Update -->

                <div class="field-wrapper" *ngIf="isProfessional" [ngClass]="{'has-value': studentAddFormData.standard_id != '-1'}">
                  <label for="masterCourse">Master Course</label>
                  <select id="masterCourse" name="masterCourse" [(ngModel)]="studentAddFormData.standard_id"
                    (ngModelChange)="fetchCourseFromMaster($event)" class="form-ctrl">
                    <option value="-1"></option>
                    <option *ngFor="let course of standardList" [value]="course.standard_id">
                      {{course.standard_name}}
                    </option>
                  </select>
                </div>

                <div class="field-wrapper" *ngIf="isProfessional" [ngClass]="{'has-value': studentAddFormData.subject_id != '-1'}">
                  <label for="course">Course</label>
                  <select id="course" [(ngModel)]="studentAddFormData.subject_id" name="course" class="form-ctrl">
                    <option value="-1"></option>
                    <option *ngFor="let list of courseList" [selected]="studentAddFormData.subject_id == list.subject_id"
                      [value]="list.subject_id">{{list.subject_name}}</option>
                  </select>
                </div>

                <div id="slotwrapper" class="field-wrapper" *ngIf="isProfessional" (click)="multiselectVisible($event.target.id)"
                  [ngClass]="{'has-value': selectedSlotsString != ''}">
                  <label for="slot">Slots</label>
                  <input id="slot" type="text" [ngModel]="selectedSlotsString" name="slots" class="form-ctrl" readonly="true" />
                </div>
                <div id="slotmulti" class="hide multiselect-wrapper" (mouseleave)="multiselectVisible('slot')">
                  <div class="multiselect-wrapper-inner">
                    <ul class="">
                      <li *ngFor="let slot of slots">
                        <div class="field-checkbox-wrapper">
                          <input type="checkbox" value="" name="{{slot.label}}" [(ngModel)]="slot.status"
                            (ngModelChange)="updateSlotSelected(slot)" class="form-checkbox">
                          <label for="{{slot.label}}">{{slot.label}}</label>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>

                <div class="field-wrapper has-value hide" *ngIf="isProfessional">
                  <label for="status">Status</label>
                  <select id="status" [(ngModel)]="studentAddFormData.language_inst_status" name="status" class="form-ctrl">
                    <option></option>
                    <option *ngFor="let status of langStatus" [value]="status.data_key" [attr.selected]="status.data_key == 'admitted' ? 
                    '' : null">
                      {{status.data_value}}
                    </option>
                  </select>
                </div>

                <div id="assignCoursesParent" class="field-wrapper" *ngIf="isProfessional" (click)="openAssignBatch()"
                  [ngClass]="{'has-value': assignedBatchString != ''}">
                  <label (click)="openAssignBatch()" for="assignCourses"></label>

                  <textarea style="height:100px;padding:5px;background: #efefef;margin-top:14px" name="assignCoursesParent"
                    cols="1" rows="1" placeholder="Assign Batch" [ngModel]="assignedBatchString" id="assignCourses"
                    class="form-ctrl" readonly="true"></textarea>
                  <a style="cursor:pointer" (click)="openAssignBatch()">Assign Batch</a>
                </div>

                <!-- ================================================================= -->
                <!-- ================================================================= -->
              </div>

            </section>

          </aside>

        </section>

        <!-- Page 1 Footer -->
        <section class="middle-bottom clearFix">
          <div class="pull-left">
            <div class="field-checkbox-wrapper">

              <input type="checkbox" value="" name="isStudentActive" [(ngModel)]="formIsActive" (ngModelChange)="updateFormIsActive($event)"
                class="form-checkbox" id="isStudentActive">
              <label for="isStudentActive">Is Active Student</label>
            </div>
          </div>
          <aside class="pull-right">
            <input type="button" value="Cancel" class="btn cancle" (click)="clearFormAndRoute(values)">
            <input type="button" #btnContinueDetailPage id="form-continue" [class.hide]="quickAddStudent" value="Continue"
              class="btn fullBlue" (click)="navigateTo('kyc')">
            <input type="button" id="form-submit" [class.hide]="!quickAddStudent" (click)="studentQuickAdder(values)"
              value="Submit" class="btn hide fullBlue">
          </aside>
        </section>

      </section>
      <!-- ======================================================== -->
      <!-- ======================================================== -->


      <!-- ======================================================== -->
      <!-- ======================================================== -->
      <!-- ======================Other Form========================== -->
      <section class="student-flow-wrapper " *ngIf="isOtherActive" id="kyc">
        <section class="kyc-section ">
          <section class="middle-top clearFix">
            <h1 class="pull-left">
              Other Details
            </h1>
            <aside class="pull-right">
              <!-- <div class="need-help">
                <div class="questionInfo">
                  <span class="qInfoIcon">?</span>
                </div>
                <a>Need help?</a>
              </div> -->
            </aside>
          </section>
        </section>
        <section class="clearFix student-flow row " id="studentFlow">
          <aside class="pull-left middle-left">
            <div class="form-type1 other-detail-wrapper">
              <custom-student *ngFor="let component of customComponents">

                <div class="row" *ngIf="component.type == 1" input-def>
                  <div class="field-wrapper" [ngClass]="{'has-value': component.value != ''}">
                    <label *ngIf="component.is_required == 'Y'" for="{{component.id}}">{{component.label}}*</label>
                    <label *ngIf="component.is_required == 'N'" for="{{component.id}}">{{component.label}} </label>

                    <input type="text" value="{{component.value}}" id="{{component.id}}" [(ngModel)]="component.value"
                      class="form-ctrl" name="{{component.label}}" />
                  </div>
                </div>

                <div class="row" *ngIf="component.type == 2" input-def>
                  <br>
                  <div class="field-checkbox-wrapper">
                    <input class="form-checkbox" id="{{component.id}}" type="checkbox" [(ngModel)]="component.value"
                      name="{{component.label}}" value="{{component.value}}">
                    <label *ngIf="component.is_required == 'Y'" for="{{component.id}}">{{component.label}}*</label>
                    <label *ngIf="component.is_required == 'N'" for="{{component.id}}">{{component.label}} </label>
                  </div>
                </div>

                <div class="row" *ngIf="component.type == 3" input-def>
                  <div class="field-wrapper" [ngClass]="{'has-value': component.value != ''}">
                    <label *ngIf="component.is_required == 'Y'" for="{{component.id}}">{{component.label}}*</label>
                    <label *ngIf="component.is_required == 'N'" for="{{component.id}}">{{component.label}} </label>

                    <select id="{{component.id}}" class="form-ctrl" [(ngModel)]="component.value" name="{{component.label}}">
                      <option value=""></option>
                      <option *ngFor="let opt of component.prefilled_data" value="{{opt.data}}">{{opt.data}}</option>
                    </select>
                  </div>
                </div>

                <div class="row" *ngIf="component.type == 4" input-def>
                  <div id="{{component.id}}wrapper" class="field-wrapper" (click)="multiselectVisible($event.target.id)"
                    [ngClass]="{'has-value': component.value != ''}">
                    <label *ngIf="component.is_required == 'Y'" for="{{component.id}}">{{component.label}}*</label>
                    <label *ngIf="component.is_required == 'N'" for="{{component.id}}">{{component.label}} </label>
                    <input id="{{component.id}}" type="text" [ngModel]="component.selectedString" name="{{component.label}}"
                      class="form-ctrl" readonly="true" />
                  </div>
                  <div id="{{component.id}}multi" class="hide multiselect-wrapper" (mouseleave)="multiselectVisible(component.id)">
                    <div class="multiselect-wrapper-inner">
                      <ul class="">
                        <li *ngFor="let opt of component.prefilled_data">
                          <div class="field-checkbox-wrapper">
                            <input type="checkbox" value="" name="{{opt.data}}" [(ngModel)]="opt.checked"
                              (ngModelChange)="updateMultiSelect(opt, component.id)" class="form-checkbox">
                            <label for="opt.data">{{opt.data}}</label>
                          </div>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>

                <div class="row" *ngIf="component.type == 5" input-def>
                  <div class="field-wrapper datePickerBox" [ngClass]="{'has-value': component.value != 'Invalid date'}">
                    <label for="{{component.id}}">{{component.label}} </label>
                    <input type="text" value="" readonly="true" id="{{component.id}}" [(ngModel)]="component.value"
                      class="form-ctrl bsDatepicker" name="{{component.label}}" bsDatepicker />
                  </div>
                </div>

              </custom-student>
            </div>

          </aside>
        </section>
        <section class="middle-bottom clearFix ">
          <aside class="pull-left">
            <input type="button" value="Back" class="btn" (click)="navigateTo('studentForm')">
          </aside>
          <aside class="pull-right">
            <input type="button" value="Cancel" class="btn cancle" (click)="clearFormAndRoute(values)">
            <input type="button" #saveAndContinue id="form-kyc-continue" value="Save and Continue" class="btn fullBlue"
              [class.hide]="quickAddStudent" (click)="addStudentDataAndFetchFee(values)">
            <input type="button" id="form-kyc-submit" (click)="studentQuickAdder(values)" value="Submit" [class.hide]="!quickAddStudent"
              class="btn hide fullBlue">
          </aside>
        </section>
      </section>

    </form>
    <!-- ======================================================== -->
    <!-- ======================================================== -->

    <!-- ======================================================== -->
    <!-- =============== Fee Details =============================== -->
    <section class="student-flow-wrapper " *ngIf="isFeeActive" id="feeDetails" [class.hide]="quickAddStudent">
      <section class="fee-section-page">
        <!--====================================middle Top section==========================-->
        <section class="middle-top clearFix">
          <h1 class="pull-left">
            Fees :
            <span style="font-weight: 100; ">{{studentAddFormData.student_name}}</span>
          </h1>
          <aside class="pull-right btn-diff">
            <button class="btn-header" (click)="openDiscountApply()" *ngIf="showFeeSection">
              <img src="../../../../assets/images/discount.svg" style="height: 18px;margin: 0 0.4em;">
              <span>Discount</span>
            </button>
            <button class="btn-header" (click)="isPdcApply = true" *ngIf="!feeTemplateById.toCreate">
              <img src="../../../../assets/images/cheque.svg" style="height: 18px;margin: 0 0.4em;">
              <span>Manage Cheques</span>
            </button>
            <button class="btn-header" *ngIf="!showFeeSection" (click)="configureFees($event)">
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" style="vertical-align: middle;">
                <g fill="#0084F6" fill-rule="nonzero">
                  <path d="M6.014 15.478a.458.458 0 1 0 .917 0c0-4.987 3.99-9.056 8.921-9.135l-.625.63a.461.461 0 0 0 .324.788.462.462 0 0 0 .325-.135l1.407-1.418a.461.461 0 0 0 0-.653l-1.407-1.419a.453.453 0 0 0-.649 0 .461.461 0 0 0 0 .654l.63.634c-5.44.07-9.843 4.553-9.843 10.054zM25.528 15.016a.458.458 0 0 0-.458.462c0 4.987-3.99 9.055-8.921 9.135l.625-.63a.461.461 0 0 0 0-.653.453.453 0 0 0-.648 0l-1.408 1.418a.46.46 0 0 0 0 .653l1.408 1.418a.462.462 0 0 0 .324.136.462.462 0 0 0 .324-.789l-.63-.634c5.44-.07 9.843-4.554 9.843-10.054a.458.458 0 0 0-.459-.462zM14.87 12.73a2.948 2.948 0 0 0-1.596 1.61c-.301.732-.301 1.544 0 2.276A2.944 2.944 0 0 0 16 18.454a2.86 2.86 0 0 0 1.13-.228 2.948 2.948 0 0 0 1.596-1.61c.301-.732.301-1.544 0-2.276a2.944 2.944 0 0 0-2.726-1.839c-.39 0-.769.08-1.13.229zm3.01 1.964a2.056 2.056 0 0 1 0 1.572c-.208.509-.597.9-1.102 1.11-.25.103-.509.16-.777.16-.83 0-1.565-.5-1.88-1.27a2.056 2.056 0 0 1 0-1.572c.208-.508.597-.9 1.102-1.11.25-.103.509-.159.778-.159.824 0 1.564.5 1.88 1.27z" />
                  <path d="M16.926 9.324l-.19.462a5.52 5.52 0 0 0-1.467 0l-.19-.462a1.015 1.015 0 0 0-1.328-.55l-.866.359a1.024 1.024 0 0 0-.551 1.339l.19.462c-.39.303-.741.653-1.037 1.045l-.459-.191a1.015 1.015 0 0 0-1.329.55l-.356.872a1.024 1.024 0 0 0 .55 1.339l.46.192a5.648 5.648 0 0 0 0 1.479l-.459.19a1.024 1.024 0 0 0-.55 1.34l.356.872a1.015 1.015 0 0 0 1.328.55l.459-.19c.3.391.648.746 1.037 1.045l-.19.461c-.213.523.032 1.12.55 1.335l.867.359a1.015 1.015 0 0 0 1.329-.55l.19-.462a5.52 5.52 0 0 0 1.467 0l.19.461a1.015 1.015 0 0 0 1.328.55l.866-.358a1.024 1.024 0 0 0 .55-1.34l-.189-.461c.389-.303.74-.653 1.037-1.045l.458.191a1.015 1.015 0 0 0 1.329-.55l.357-.873a1.024 1.024 0 0 0-.55-1.339l-.46-.191a5.648 5.648 0 0 0 0-1.479l.459-.191a1.024 1.024 0 0 0 .55-1.34l-.356-.872a1.015 1.015 0 0 0-1.329-.55l-.458.191a5.662 5.662 0 0 0-1.037-1.045l.19-.462a1.024 1.024 0 0 0-.55-1.339l-.867-.359a1.012 1.012 0 0 0-1.329.555zm.519 1.153l.329-.803a.096.096 0 0 1 .092-.06c.014 0 .023.004.037.009l.866.36a.089.089 0 0 1 .051.05.084.084 0 0 1 0 .075l-.329.802a.463.463 0 0 0 .167.56c.523.355.968.798 1.315 1.325.12.182.356.257.555.173l.797-.331c.014-.005.023-.01.037-.01.032 0 .074.014.092.061l.357.872a.106.106 0 0 1-.051.131l-.796.331a.46.46 0 0 0-.274.518c.125.62.12 1.25 0 1.876a.469.469 0 0 0 .274.517l.796.332a.089.089 0 0 1 .05.051.084.084 0 0 1 0 .075l-.356.872a.096.096 0 0 1-.092.06c-.014 0-.023-.004-.037-.009l-.797-.33a.455.455 0 0 0-.555.167 4.758 4.758 0 0 1-1.315 1.325.466.466 0 0 0-.171.56l.328.802c.014.033.01.06 0 .075-.009.019-.023.042-.055.051l-.866.36c-.014.004-.023.009-.037.009a.096.096 0 0 1-.093-.06l-.328-.803a.456.456 0 0 0-.51-.276 4.805 4.805 0 0 1-1.86 0 .463.463 0 0 0-.515.276l-.328.802a.096.096 0 0 1-.093.06c-.014 0-.023-.004-.037-.009l-.866-.359c-.05-.018-.074-.08-.05-.13l.328-.803a.463.463 0 0 0-.166-.56 4.759 4.759 0 0 1-1.315-1.325.459.459 0 0 0-.556-.172l-.796.331c-.014.005-.023.01-.037.01a.096.096 0 0 1-.093-.061l-.356-.873c-.014-.032-.01-.06 0-.074.009-.019.023-.042.05-.052l.797-.33a.46.46 0 0 0 .273-.519 4.824 4.824 0 0 1 0-1.875.469.469 0 0 0-.273-.518l-.796-.331a.089.089 0 0 1-.051-.052.084.084 0 0 1 0-.074l.356-.873a.096.096 0 0 1 .093-.06c.014 0 .023.004.037.009l.796.331a.455.455 0 0 0 .556-.168 4.758 4.758 0 0 1 1.315-1.325.466.466 0 0 0 .17-.56l-.328-.802c-.014-.033-.01-.06 0-.075a.107.107 0 0 1 .056-.056l.865-.359c.014-.004.024-.01.037-.01.033 0 .075.015.093.062l.329.802c.083.205.3.317.514.275a4.805 4.805 0 0 1 1.86 0 .447.447 0 0 0 .51-.27z" />
                </g>
              </svg>
              <span>Configure Fees</span>
            </button>
            <button class="btn-header" (click)="reConfigureFees($event)" *ngIf="showFeeSection">
              <img src="../../../../assets/images/reconfigure.svg" style="width:16px; height:16px;">
              <span>Reconfigure Fees</span>
            </button>
          </aside>
        </section>

        <!--====================================middle <Main> section==========================-->

        <section *ngIf="showFeeSection">

          <div class="card-layout">

            <div class="actual-Amount">
              <span class="label">Fee Amount</span><br />
              <span class="amount-Value">{{cardAmountObject.feeAmountExclTax | commaSeprator}}</span>
            </div>

            <div class="discount-Amount tooltipDiv">
              <span class="label">Discount</span>
              <i class="fas fa-info-circle" style="font-family: FontAwesome;float: right;color: antiquewhite;"></i>
              <br />
              <span class="amount-Value">{{cardAmountObject.discountAmount | commaSeprator}}</span>
              <span class="tooltip-content">The discount value is the total discount applied to the student across all
                its course(s). This value is the combination of previous discount and the new discount applied post the
                release of new discount feature recently introduced.</span>
            </div>

            <div class="tax-Amount tooltipDiv">
              <span class="label">Tax On Installment</span>
              <i class="fas fa-info-circle" style="font-family: FontAwesome;float: right;color: antiquewhite;"></i>
              <br />
              <span class="amount-Value">{{cardAmountObject.taxAmount | commaSeprator}}</span>
              <span class="tooltip-content">Tax component in Summary card and total tax in individual Installments may
                differ due to rounding off decimal values.</span>
            </div>

            <div class="additional-Amount" *ngIf="cardAmountObject.additionalFees > 0">
              <span class="label">Additional Fee (Incl of Tax)</span><br />
              <span class="amount-Value">{{cardAmountObject.additionalFees | commaSeprator}}</span>
            </div>

            <div class="total-Amount">
              <span class="label">Total Fee (Incl. of tax)</span><br />
              <span class="amount-Value">{{cardAmountObject.feeAmountInclTax | commaSeprator}}</span>
            </div>

            <div class="amount-Paid">
              <span class="label">Amount Paid</span><br />
              <span class="amount-Value">{{cardAmountObject.amountPaid | commaSeprator}}</span>
            </div>

            <div class="amount-Due">
              <span class="label">Amount Due</span><br />
              <span class="amount-Value">{{cardAmountObject.amountDue | commaSeprator}}</span>
            </div>

          </div>

          <div class="row">
            <div class="c-sm-6 c-md-6 c-lg-6">
              <div class="field-checkbox-wrapper" style="display: inline-block;margin-right: 15px;">
                <input type="checkbox" value="" class="form-checkbox" [(ngModel)]="checkBoxGroup.unpaidInstallment"
                  (ngModelChange)="onPaidOrUnpaidCheckbox()" name="chkBoxUnpaidMain" id="chkBoxUnpaidMain" />
                <label for="chkBoxUnpaidMain">Unpaid</label>
              </div>

              <div class="field-checkbox-wrapper" style="display: inline-block;margin-right: 15px;">
                <input type="checkbox" value="" class="form-checkbox" [(ngModel)]="checkBoxGroup.paidInstallment"
                  (ngModelChange)="onPaidOrUnpaidCheckbox()" name="chkBoxpaidMain" id="chkBoxpaidMain" />
                <label for="chkBoxpaidMain">Paid</label>
              </div>
            </div>
          </div>

          <div class="table-section" *ngIf="subjectWiseInstallmentArray.length > 0">
            <ul>
              <li class="table-rows title-section">

                <aside class="checkbox-div">
                  <div class="field-checkbox-wrapper">
                    <input type="checkbox" value="" class="form-checkbox" id="instl{{i}}" [(ngModel)]="tableHeaderCheckbox"
                      (ngModelChange)="mainTAbleCheckboxClicked($event)" />
                    <label for="instl{{i}}">Course Name</label>
                  </div>
                </aside>

                <aside class="column-name">
                  <div class="fee-amount amount">
                    <span>Fee (Incl. Tax)</span>
                  </div>

                  <div class="discount-amount amount">
                    <span>Discount</span>
                  </div>

                  <div class="tax-amount amount">
                    <span>Tax</span>
                  </div>

                  <div class="paid-amount amount">
                    <span>Paid</span>
                  </div>

                  <div class="due-amount amount">
                    <span>Due</span>
                  </div>

                  <div class="status">
                    <span>Status</span>
                  </div>
                </aside>

              </li>
            </ul>
            <ul>
              <li *ngFor="let data of subjectWiseInstallmentArray; let i= index" class="table-rows">

                <div class="course-installment" (click)="openInstallmentListOfCourse(i ,  'open' , $event)">
                  <div class="checkbox-div">
                    <div class="field-checkbox-wrapper hide" [ngClass]="{visibilityHidden: data.paid_Full_Installment_CourseWise == 'Paid'}">
                      <input type="checkbox" value="" class="form-checkbox" [(ngModel)]="data.uiSelected"
                        (ngModelChange)="onCheckBoxSelection($event ,  'course' , data)" />
                      <label></label>
                    </div>
                    <span>
                      <i id="idDownIcon{{i}}" class="fa fa-angle-right iconStyling" aria-hidden="true" (click)="openInstallmentListOfCourse(i ,  'open' , $event)"></i>
                      <i id="idUpIcon{{i}}" class="fa fa-angle-down hide iconStyling" aria-hidden="true" (click)="openInstallmentListOfCourse(i ,  'close' , $event)"></i>
                      <span class="elipsisText" *ngIf="data.master_course_name != '' &&  data.master_course_name != null"
                        title="{{data.master_course_name}} - {{data.courseName}}">{{data.master_course_name}}
                        - {{data.courseName}}</span>
                      <span class="elipsisText" *ngIf="data.master_course_name == '' ||  data.master_course_name == null">{{data.courseName}}</span>
                    </span>
                  </div>

                  <div class="column-name">
                    <div class="fee-amount amount">
                      <span>{{data.feeAmountIncludingTax | commaSeprator}}</span>
                    </div>

                    <div class="discount-amount amount">
                      <span>{{data.discount | commaSeprator}}</span>
                    </div>

                    <div class="tax-amount amount">
                      <span>{{data.taxAmount | commaSeprator}}</span>
                    </div>

                    <div class="paid-amount amount">
                      <span>{{data.paidAmount | commaSeprator}}</span>
                    </div>

                    <div class="due-amount amount">
                      <span>{{data.dueAmount | commaSeprator}}</span>
                    </div>

                    <div class="status-amount">
                      <span *ngIf="data.paid_Full_Installment_CourseWise == 'Partially Paid'" class="partial">{{data.paid_Full_Installment_CourseWise}}</span>
                      <span *ngIf="data.paid_Full_Installment_CourseWise == 'Due'" class="due">{{data.paid_Full_Installment_CourseWise}}</span>
                      <span *ngIf="data.paid_Full_Installment_CourseWise == 'Paid'" class="paid">{{data.paid_Full_Installment_CourseWise}}</span>
                    </div>
                  </div>
                </div>

                <div id="installmentTable{{i}}" class="hide installment-list" style="border-bottom: 3px solid #0060a3;">
                  <ul>
                    <li class="inner-table title-section">

                      <div class="checkbox">
                        <!-- <div class="field-checkbox-wrapper">
                                <input type="checkbox" value="" class="form-checkbox" id="instl{{i}}" />
                                <label for="instl{{i}}"></label>
                              </div> -->
                      </div>

                      <div class="column-map">

                        <div class="fee-Type">
                          <span>Fee Type</span>
                        </div>

                        <div class="amount">
                          <span>Amount</span>
                        </div>

                        <div class="Tax">
                          <span>Tax</span>
                        </div>

                        <div class="discount">
                          <span>Discount</span>
                        </div>

                        <div class="balance" style="margin-right:5px">
                          <span>Balance</span>
                        </div>

                        <div class="dueDate">
                          <span>Due Date</span>
                        </div>

                        <div class="paidDate">
                          <span>Paid Date</span>
                        </div>

                        <div class="paymentMode">
                          <span>Mode</span>
                        </div>

                        <div class="status">
                          <span>Status</span>
                        </div>

                        <div class="actionDiv">

                        </div>

                      </div>

                    </li>

                    <li *ngFor="let installment of data.installmentArray; let j = index" class="inner-table installment-row">

                      <div class="checkbox">
                        <div class="field-checkbox-wrapper" [ngClass]="{visibilityHidden: installment.paid_full == 'Y'}">
                          <input type="checkbox" value="" class="form-checkbox" id="installmentCh{{installment.installment_no}}"
                            [(ngModel)]="installment.uiSelected" (ngModelChange)="onCheckBoxSelection($event ,  'installment' , installment)" />
                          <label for="installmentCh{{installment.installment_no}}"></label>
                        </div>
                        <span>{{installment.installment_no}}</span>
                      </div>

                      <div class="column-map">

                        <div class="fee-Type">
                          <span>{{installment.fee_type_name}}</span>
                        </div>

                        <div class="amount">
                          <span>{{installment.initial_fee_amount_before_disocunt_before_tax | commaSeprator}}</span>
                        </div>

                        <div class="Tax">
                          <span>{{installment.tax | commaSeprator}}</span>
                        </div>

                        <div class="discount">
                          <span>{{installment.discount | commaSeprator}}</span>
                        </div>

                        <div class="balance" style="margin-right:5px">
                          <span *ngIf="installment.paid_full == 'Y'">{{ 0 | commaSeprator}}</span>
                          <span *ngIf="installment.balance_amount > 0 && installment.paid_full == 'N'">{{installment.balance_amount
                            | commaSeprator}}</span>
                          <span *ngIf="installment.balance_amount == 0 && installment.paid_full == 'N'">{{installment.fees_amount
                            | commaSeprator}}</span>
                        </div>

                        <div class="dueDate">
                          <span>{{installment.due_date | date:"dd MMM yyyy"}}</span>
                        </div>

                        <div class="paidDate">
                          <span *ngIf="installment.amount_paid > 0">{{installment.paid_date | date:"dd MMM yyyy"}}</span>
                        </div>

                        <div class="paymentMode" style="overflow: hidden;  text-overflow: ellipsis;">
                          <span *ngIf="installment.amount_paid > 0">{{installment.paymentMode}}</span>
                        </div>

                        <div class="status-amount">
                          <span class="paid" *ngIf="((installment.is_referenced == 'Y')&&(installment.paid_full == 'Y'))">Paid</span>
                          <span class="due" *ngIf="((installment.is_referenced == 'N')&&(installment.paid_full == 'N'))">Due</span>
                          <span class="partial" *ngIf="((installment.is_referenced == 'Y')&&(installment.paid_full == 'N'))">
                            Partially Paid
                          </span>
                        </div>

                        <div class="actionDiv">

                          <span class="spanTitle" *ngIf="installment.balance_amount != 0 || installment.paid_full == 'Y'">
                            <svg viewBox="0 0 24 24" width="24px" height="24px" x="0" y="0" preserveAspectRatio="xMinYMin meet"
                              class="artdeco-icon" focusable="false">
                              <path d="M2,10H6v4H2V10Zm8,4h4V10H10v4Zm8-4v4h4V10H18Z" class="large-icon" style="fill: currentColor"></path>
                            </svg>

                            <div class="dropdown-data">
                              <ul class="">
                                <li class="" (click)="openPartialPaymentHistor(installment)">
                                  <a class="">
                                    View Payment History
                                  </a>
                                </li>
                                <li class="" (click)="emailFeeReciptInstallment(installment)">
                                  <a class="">
                                    E-mail Recipt
                                  </a>
                                </li>
                              </ul>
                            </div>

                          </span>

                        </div>

                      </div>

                    </li>

                  </ul>
                </div>

              </li>
            </ul>
          </div>

        </section>

        <section *ngIf="!showFeeSection">

          <h1 style="text-align: center;">
            No Fee Template Selected, Click Configure Fees To Select A Template
          </h1>

        </section>


        <!--====================================middle Bottom section==========================-->
        <section class="middle-bottom fd-btm clearFix">

          <aside class="pull-left">
            <input type="button" style="width: 85px;" (click)="navigateTo('kyc')" value="Back" class="btn">
          </aside>

          <aside class="pull-right">
            <div style="display: inline-block;" class="fd-btm-label" *ngIf="totalAmountToPay != 0">
              Payment for {{totalAmountToPay | commaSeprator}} to be updated
            </div>
            <div style="display: inline-block;" class="">
              <input type="button" *ngIf="totalAmountToPay != 0" value="Update Payment" (click)="openPaymentDetails($event)"
                class="btn fullBlue">
              <input *ngIf="totalAmountToPay == 0" type="button" value="Continue" (click)="navigateTo('inventory')"
                class="btn fullBlue">
            </div>
          </aside>

        </section>

      </section>

    </section>
    <!-- ======================================================== -->
    <!-- ======================================================== -->

    <!-- ======================================================== -->
    <!-- =============== Inventory =============================== -->
    <!--===========================================allocation inventory item===========================-->
    <section class="student-flow-wrapper " *ngIf="isInventoryActive" id="inventory" [class.hide]="quickAddStudent">
      <section class="clearFix allocation row" id="allocationInventoryItem">

        <aside class="middle-full">
          <section class="middle-top clearFix">
            <h1 class="pull-left">
              Inventory
              <span style="font-weight: 100; "> : {{studentAddFormData.student_name}}</span>
            </h1>
          </section>

          <section class="row invertory-add">

            <div class="c-sm-3 c-md-3 c-lg-3">
              <div class="field-wrapper">
                <label for="itemInventory">Inventory Item</label>
                <select id="itemInventory" [(ngModel)]="addInventory.item_id" name="itemInventory" class="form-ctrl"
                  (ngModelChange)="onInventoryItemSelction()">
                  <option value="-1"></option>
                  <option *ngFor="let item of inventoryItemsArr" [value]="item.item_id">
                    {{item.item_name}}
                  </option>
                </select>
                <p *ngIf="addInventory.item_id != '-1'">Available Units : {{addInventory.available_units}}</p>
              </div>
            </div>

            <div class="c-sm-2 c-md-2 c-lg-2">
              <div class="field-wrapper">
                <label>Allocate Units</label>
                <input type="number" class="form-ctrl" [(ngModel)]="addInventory.alloted_units" min="0">
              </div>
            </div>

            <div class="c-sm-2 c-md-2 c-lg-2 btn-section">
              <button class="btn fullBlue" (click)="allocateInventoryToStudent()">Allocate</button>
            </div>

          </section>


          <div class="allocation-table">
            <div class="table-scroll-wrapper">
              <div class="table table-responsive">
                <table>
                  <thead>
                    <tr>
                      <th>
                        Item
                      </th>
                      <th>
                        Category
                      </th>
                      <th>
                        Allocated Units
                      </th>
                      <th>
                        Action
                      </th>
                    </tr>
                  </thead>
                  <tbody *ngIf="allocatedItem.length > 0">
                    <tr *ngFor="let item of allocatedItem;let i = index">
                      <td>
                        {{item.item_name}}
                      </td>
                      <td>
                        {{item.category_name}}
                      </td>
                      <td>
                        {{item.alloted_units}}
                      </td>
                      <td>
                        <a *ngIf="item.alloted_units > 0" style="cursor: pointer;" (click)="deleteInventory(item)">Delete</a>
                      </td>
                    </tr>
                  </tbody>
                  <tbody *ngIf="allocatedItem.length == 0">
                    <tr>
                      <td colspan="5" style="text-align: left">
                        <h2>No Inventory Allocated</h2>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>


          <section class="middle-bottom clearFix ">
            <div class="pull-left">
              <input type="button" (click)="navigateTo('feeDetails')" value="Back" class="btn">
            </div>
            <aside class="pull-right">
              <input type="button" (click)="cancelStudentUpload()" value="Cancel" class="btn cancle">
              <!-- <input type="button" value="Update Inventory and Exit" (click)="updateStudentAllocatedInventory()" class="btn fullBlue"> -->
              <input type="button" value="Go" (click)="updateStudentAllocatedInventory()" class="btn fullBlue">
            </aside>
          </section>
        </aside>

      </section>

    </section>
    <!-- ======================================================== -->
    <!-- ======================================================== -->
  </section>

  <!-- =============== Popup Declarations ===================== -->
  <!-- ======================================================== -->
  <proctur-popup *ngIf="isNewInstituteEditor">

    <span class="closePopup pos-abs fbold show" id="popupCloseBtn" (click)="closeInstituteAdder()" close-button>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="9310 2185 16 16">
        <g id="Group_1228" data-name="Group 1228" transform="translate(8298 1888)">
          <g id="Group_1213" data-name="Group 1213" transform="translate(34.189 -7.77)">
            <line id="Line_274" data-name="Line 274" class="cls-1" y2="19.798" transform="translate(992.81 305.77) rotate(45)" />
            <line id="Line_275" data-name="Line 275" class="cls-1" x1="19.798" transform="translate(978.81 305.77) rotate(45)" />
          </g>
          <rect id="Rectangle_686" data-name="Rectangle 686" style="stroke:none;" class="cls-2" width="16" height="16"
            transform="translate(1012 297)" />
        </g>
      </svg>
    </span>

    <h2 popup-header>Institute Editor</h2>

    <div class="institute-editor" popup-content>

      <div class="row clearFix add-edit">
        <a class="expend-box" (click)="toggleInstituteAdd()">
          <i id="add-institute-icon">-</i>
          <span>Create New Institute</span>
        </a>
      </div>

      <section class="row clearFix input-section" *ngIf="isNewInstitute">
        <div class="row">
          <div class="c-lg-6 c-md-6 c-sm-6 c-xs-6 pull-left">
            <div class="field-wrapper">
              <label for="instituteName">Institute Name</label>
              <input type="text" value="" id="instituteName" class="form-ctrl" [(ngModel)]="createInstitute.instituteName"
                name="instituteName" />
            </div>
          </div>

          <div class="c-lg-6 c-md-6 c-sm-6 c-xs-6 pull-right btn-grp">
            <aside class="pull-right">
              <input type="button" value="Cancel" class="btn" (click)="closeAddInstitute()">
              <input type="button" value="Create" class="fullBlue btn" (click)="addInstituteData()">
            </aside>
          </div>

        </div>
      </section>

      <div class="row">
        <div class="table-responsive institute-table">
          <table>
            <thead>
              <tr>
                <th>ID</th>
                <th>Institute Name</th>
                <th> Action </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let sch of instituteList">
                <td>
                  {{sch.school_id}}
                </td>

                <td *ngIf="!sch.edit">
                  <div class="inst-name">
                    {{sch.school_name}}
                  </div>
                </td>

                <td *ngIf="sch.edit">
                  <div class="field-wrapper has-value">
                    <input type="text" [(ngModel)]="sch.school_name" class="form-ctrl" name="instituteName" />
                  </div>
                </td>

                <td class="edit-view-btn" *ngIf="!sch.edit">
                  <div class="">
                    <a (click)="editInstitute(sch.school_id)" style="cursor:pointer">
                      <i class="edit-icon cursor-icon" aria-hidden="true"></i>Edit
                    </a>
                  </div>
                  <div class="">
                    <a (click)="deleteInstitute(sch.school_id)" style="cursor:pointer">
                      <i class="view-icon cursor-icon" aria-hidden="true"></i>Delete
                    </a>
                  </div>
                </td>

                <td class="edit-view-btn" *ngIf="sch.edit">
                  <div class="">
                    <a (click)="cancelEditInstitute(sch.school_id)" style="cursor:pointer">
                      <i class="edit-icon" aria-hidden="true"></i>Cancel
                    </a>
                  </div>
                  <div class="">
                    <a (click)="updateInstitute(sch.school_id)" style="cursor:pointer">
                      <i class="view-icon update-icon" aria-hidden="true"></i>Update
                    </a>
                  </div>
                </td>

              </tr>
            </tbody>
          </table>
        </div>
      </div>

    </div>

  </proctur-popup>

  <!-- ======================================================== -->
  <!-- ======================================================== -->
  <!-- =============== Assign Batch =============================== -->
  <student-batch-list [assignedBatches]="studentAddFormData.assignedBatches" (closeBatch)="closeBatchAssign($event)"
    (assignList)="getassignedBatchList($event)" *ngIf="isAssignBatch" [dataList]="batchList" [isEdit]="isEdit"
    [standardList]="standardList" [academicYear]="academicYear"></student-batch-list>

  <!-- ======================================================== -->
  <!-- ======================================================== -->
  <!-- =============== Duplicate Student =============================== -->
  <proctur-popup [hidden]="!isDuplicateStudent">
    <span class="closePopup pos-abs fbold show" id="popupCloseBtn" (click)="isDuplicateContactClose()" close-button>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="9310 2185 16 16">
        <g id="Group_1228" data-name="Group 1228" transform="translate(8298 1888)">
          <g id="Group_1213" data-name="Group 1213" transform="translate(34.189 -7.77)">
            <line id="Line_274" data-name="Line 274" class="cls-1" y2="19.798" transform="translate(992.81 305.77) rotate(45)" />
            <line id="Line_275" data-name="Line 275" class="cls-1" x1="19.798" transform="translate(978.81 305.77) rotate(45)" />
          </g>
          <rect id="Rectangle_686" data-name="Rectangle 686" style="stroke:none;" class="cls-2" width="16" height="16"
            transform="translate(1012 297)" />
        </g>
      </svg>
    </span>

    <h2 popup-header>Student Username Details</h2>

    <div class="duplicate-contact-form" popup-content>
      <div class="row">
        <h4>Student's contact number already exist for institution, Kindly specify the unique email id of the student.
        </h4>
      </div>
      <div class="row">
        <form #semail="ngForm" (ngSubmit)="registerDuplicateStudent(semail)">
          <div class="field-wrapper">
            <label for="sEmail2">Student's Email*</label>
            <input type="text" value="" id="sEmail2" class="form-ctrl" [(ngModel)]="studentAddFormData.student_manual_username"
              name="sEmail2" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" #sEmail2="ngModel" required />
            <div *ngIf="sEmail2.invalid && (sEmail2.dirty || sEmail2.touched)" class="alert invalid-alert">
              <div *ngIf="sEmail2.errors.required">
                Email ID is required.
              </div>
              <div *ngIf="sEmail2.errors.pattern">
                Enter email in format eg. someone@xyz.com
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="row">
      </div>
    </div>

    <div class="" popup-footer>
      <div class="clearfix">
        <aside class="pull-right popup-btn">
          <input type="button" value="Cancel" class="btn" (click)="isDuplicateContactClose()">
          <input type="button" value="Ok" class="fullBlue btn" [disabled]="!semail.form.valid" (click)="registerDuplicateStudent(semail)">
        </aside>
      </div>
    </div>
  </proctur-popup>

  <!-- ======================================================== -->
  <!-- ======================================================== -->
  <!-- =============== Configure Fees =============================== -->
  <proctur-popup *ngIf="isConfigureFees">
    <span class="closePopup pos-abs fbold show" id="popupCloseBtn" (click)="closeConfigureFees($event)" close-button>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="9310 2185 16 16">
        <g id="Group_1228" data-name="Group 1228" transform="translate(8298 1888)">
          <g id="Group_1213" data-name="Group 1213" transform="translate(34.189 -7.77)">
            <line id="Line_274" data-name="Line 274" class="cls-1" y2="19.798" transform="translate(992.81 305.77) rotate(45)" />
            <line id="Line_275" data-name="Line 275" class="cls-1" x1="19.798" transform="translate(978.81 305.77) rotate(45)" />
          </g>
          <rect id="Rectangle_686" data-name="Rectangle 686" style="stroke:none;" class="cls-2" width="16" height="16"
            transform="translate(1012 297)" />
        </g>
      </svg>
    </span>

    <h2 popup-header>Configure Fees :
      <span style="font-weight: 100">{{studentAddFormData.student_name}}</span>
    </h2>

    <div class="configureFee" popup-content>
      <div class="row">
        <h4>Select Fee Structure</h4>
      </div>
      <div class="row">

        <div class="field-wrapper">
          <label for="feeS">Fee Structure*</label>
          <select id="feeS" name="feeS" [(ngModel)]="feeTempSelected" class="form-ctrl">
            <option value="-1"></option>
            <option *ngFor="let fee of feeTemplateStore" [value]="fee.template_id">
              {{fee.template_name}}
            </option>
          </select>
        </div>

        <div class="field-wrapper datePickerBox has-value">
          <label for="effD">Effective Date*</label>
          <input type="text" value="" id="effD" class="form-ctrl bsDatepicker" [(ngModel)]="feeStructureForm.template_effective_date"
            name="effD" readonly="true" bsDatepicker>
          <span class="date-clear" name="followupdate" (click)="clearEffectiveDate($event)">clear</span>
        </div>

      </div>
    </div>

    <div class="" popup-footer>
      <div class="clearfix">
        <aside class="pull-right popup-btn">
          <input type="button" value="Cancel" class="btn" (click)="closeConfigureFees($event)">
          <input type="button" value="Apply" (click)="applyConfiguredFees($event)" class="fullBlue btn">
        </aside>
      </div>
    </div>

  </proctur-popup>

  <!-- ======================================================== -->
  <!-- ======================================================== -->
  <!-- =============== assign fees =============================== -->
  <student-fee-table *ngIf="isDefineFees" [courseDropdown]="courseDropdown" (closePopup)="closeAllFeePops($event)"
    [feeTemplateData]="feeTemplateById" [studentName]="studentName" [student_id]="student_id"></student-fee-table>


  <!-- ======================================================== -->
  <!-- ======================================================== -->
  <!-- =============== Apply Discounts ============================ -->

  <student-discount *ngIf="isDiscountApply" [feeObject]="feeObject" [totalDiscountApplied]="cardAmountObject.discountAmount"
    [initialAmountWithoutTax]="cardAmountObject.feeAmountExclTax" (closePopup)="onDiscountPopUpClose(event)"
    [student_id]="student_id"></student-discount>

  <!-- ======================================================== -->
  <!-- ======================================================== -->
  <!-- ===============Manage PDC ============================ -->
  <proctur-popup [sizeWidth]="'large'" *ngIf="isPdcApply">

    <span class="closePopup pos-abs fbold show" id="popupCloseBtn" (click)="closePDCPop()" close-button>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="9310 2185 16 16">
        <g id="Group_1228" data-name="Group 1228" transform="translate(8298 1888)">
          <g id="Group_1213" data-name="Group 1213" transform="translate(34.189 -7.77)">
            <line id="Line_274" data-name="Line 274" class="cls-1" y2="19.798" transform="translate(992.81 305.77) rotate(45)" />
            <line id="Line_275" data-name="Line 275" class="cls-1" x1="19.798" transform="translate(978.81 305.77) rotate(45)" />
          </g>
          <rect id="Rectangle_686" data-name="Rectangle 686" style="stroke:none;" class="cls-2" width="16" height="16"
            transform="translate(1012 297)" />
        </g>
      </svg>
    </span>

    <h2 popup-header style="padding: 10px 5px;">Manage Cheques :
      <span style="font-weight: 100;">{{studentAddFormData.student_name}}</span>
    </h2>

    <div class="pdc-container" popup-content>
      <div class="pdc-wrapper">
        <div class="pdc-shell">
          <!-- Header Installment -->
          <div class="pdc-header">
            <div class="pull-left">
              Add Post Dated Cheque
              <!-- <span class="installment-count">4</span> -->
            </div>
            <div class="pull-right">
            </div>
          </div>
          <!-- Installment Adding Here -->
          <div class="pdc-adder">
            <ul>

              <li>
                <div class="form-wrapper">
                  <input type="text" value="" placeholder="Bank Name" class="form-ctrl" id="bankName" [(ngModel)]="pdcAddForm.bank_name"
                    name="bankName" maxlength="50" required>
                </div>
              </li>

              <li>
                <div class="form-wrapper">
                  <input type="text" onkeypress="return (event.charCode >= 48 && event.charCode <= 57)" value=""
                    placeholder="Cheque Number" class="form-ctrl" id="chequeno" [(ngModel)]="pdcAddForm.cheque_no" name="chequeno"
                    minlength="6" maxlength="6" #chequeno="ngModel" required>
                </div>
              </li>

              <li>
                <div class="form-wrapper">
                  <input type="text" value="" placeholder="Cheque Date" id="chequedate" class="form-ctrl bsDatepicker"
                    name="chequedate" [(ngModel)]="pdcAddForm.cheque_date" readonly="true" #chequedate="ngModel"
                    bsDatepicker>
                </div>
              </li>

              <li>
                <div class="form-wrapper">
                  <input type="text" onkeypress="return (event.charCode >= 48 && event.charCode <= 57)" value="" id="chequeamount"
                    class="form-ctrl" name="chequeamount" [(ngModel)]="pdcAddForm.cheque_amount" max="6" placeholder="Amount">
                </div>
              </li>

              <li>
                <button #btnPdcPopUpAdd (click)="addNewPDCState()" class="fullBlue btn">
                  <i style="font-family: FontAwesome;" class="fa fa-plus" aria-hidden="true"></i>
                </button>
              </li>

            </ul>
          </div>
        </div>

        <div class="pdc-data-shell">
          <a id="hiddenAnchorAck"></a>
          <div class="pdc-table">
            <ul class="table-header">
              <li></li>
              <li>Bank*</li>
              <li>Cheque Number*</li>
              <li>Cheque Date*</li>
              <li>Clearing Date</li>
              <li>Cheque Amount*</li>
              <li>Status</li>
              <li>Action</li>
            </ul>

            <div class="table-data" *ngIf="chequePdcList.length != 0">
              <ul class="table-row displayComp" [id]='ch.student_id +ch.cheque_id' *ngFor="let ch of chequePdcList; let i = index;">
                <li>
                  <div class="field-checkbox-wrapper">
                    <input type="checkbox" name="pdcGen" class="form-checkbox" [(ngModel)]="ch.uiSelected" id="pdcEditlist{{i}}">
                    <label for="pdcEditlist{{i}}"></label>
                  </div>
                </li>

                <li class="view-comp">
                  {{ch.bank_name}}
                </li>
                <li class="edit-comp ">
                  <div class="field-wrapper">
                    <input type="text" class="form-ctrl" [(ngModel)]="ch.bank_name" name="">
                  </div>
                </li>


                <!-- Cheque Number -->
                <li class="view-comp">
                  {{ch.cheque_no}}
                </li>
                <li class="edit-comp">
                  <div class="field-wrapper">
                    <input type="text" class="form-ctrl" [(ngModel)]="ch.cheque_no" name="cnum">
                  </div>
                </li>

                <!-- Cheque date -->
                <li class="view-comp">
                  {{ch.cheque_date| procturDate}}
                </li>
                <li class="edit-comp ">
                  <div class="field-wrapper datePickerBox">
                    <input type="text" value="" id="" class="form-ctrl bsDatepicker" [(ngModel)]="ch.cheque_date" name="pdto"
                      readonly="true" bsDatepicker>
                  </div>
                </li>

                <!-- Clearing Date -->
                <li class="view-comp">
                  {{ch.clearing_date| procturDate}}
                </li>
                <li class="edit-comp ">
                  <div class="field-wrapper datePickerBox">
                    <input type="text" value="" id="" class="form-ctrl bsDatepicker" [(ngModel)]="ch.clearing_date"
                      name="pdto" readonly="true" bsDatepicker>
                  </div>
                </li>

                <!-- Amount -->
                <li class="view-comp">
                  {{ch.cheque_amount}}
                </li>
                <li class="edit-comp ">
                  <div class="field-wrapper">
                    <input type="text" class="form-ctrl" [(ngModel)]="ch.cheque_amount" name="cnum">
                  </div>
                </li>

                <!-- Status -->
                <li class="view-comp">
                  {{ch.cheque_status}}
                </li>
                <li class="edit-comp">
                  <div class="field-wrapper">
                    <select id="" class="form-ctrl" name="" [(ngModel)]="ch.cheque_status_key">
                      <option *ngFor="let opt of pdcStatus" [value]="opt.data_key" [hidden]="opt.data_key == '3'">
                        {{opt.data_value}}
                      </option>
                    </select>
                  </div>
                </li>

                <!-- Action -->
                <li class="view-comp actions">
                  <a style="cursor:pointer;margin-right: 15px;" (click)="editPDC(ch)" *ngIf="(ch.cheque_status_key != 3 && ch.cheque_status_key != 2)">Edit</a>
                  <a style="cursor:pointer;margin-right: 15px;" (click)="deletePDC(ch, i)" *ngIf="(ch.cheque_status_key != 3 && ch.cheque_status_key != 2)">Delete</a>
                </li>
                <li class="edit-comp">
                  <a style="cursor:pointer;margin-right: 15px;" (click)="updatePDC(ch)">Update</a>
                  <a style="cursor:pointer;margin-right: 15px;" (click)="cancelEditPDC(ch)">Cancel</a>
                </li>

              </ul>
            </div>

            <div class="table-data" *ngIf="chequePdcList.length == 0">
              <h3 style="text-align: center;padding: 20px 0px;border-bottom: 1px solid rgba(119, 119, 119, 0.32);border-left: 1px solid rgba(119, 119, 119, 0.32);border-right: 1px solid rgba(119, 119, 119, 0.32);">No
                Cheque Saved</h3>
            </div>

          </div>
        </div>

      </div>
    </div>

    <div class="" popup-footer>
      <div class="clearfix">
        <aside class="pull-left popup-btn">
          <input type="button" value="Generate Acknowledgement" (click)="generateAck()" class="fullBlue btn">
          <input type="button" value="Send Acknowledgement" (click)="sendAck()" class="btn">
        </aside>
      </div>
    </div>

  </proctur-popup>

  <!-- ======================================================== -->
  <!-- ======================================================== -->
  <!-- =============== Fees Payment Manager=============================== -->
  <proctur-popup [sizeWidth]="'small'" *ngIf="isFeePaymentUpdate">

    <span class="closePopup pos-abs fbold show" id="popupCloseBtn" (click)="flushPaymentPopUpData()" close-button>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="9310 2185 16 16">
        <g id="Group_1228" data-name="Group 1228" transform="translate(8298 1888)">
          <g id="Group_1213" data-name="Group 1213" transform="translate(34.189 -7.77)">
            <line id="Line_274" data-name="Line 274" class="cls-1" y2="19.798" transform="translate(992.81 305.77) rotate(45)" />
            <line id="Line_275" data-name="Line 275" class="cls-1" x1="19.798" transform="translate(978.81 305.77) rotate(45)" />
          </g>
          <rect id="Rectangle_686" data-name="Rectangle 686" style="stroke:none;" class="cls-2" width="16" height="16"
            transform="translate(1012 297)" />
        </g>
      </svg>
    </span>

    <h2 popup-header style="padding: 10px 5px;">Student Fee Payment
      <span>(Payment Details for {{paymentPopUpJson.immutableAmount| commaSeprator}})</span>
    </h2>

    <div class="paymentWrapper" popup-content>

      <div class="paymentForm">

        <div class="row">

          <div class="field-wrapper">
            <label for="payamt">Payment for</label>
            <input type="text" id="payamt" class="form-ctrl" onkeypress="return (event.charCode >= 48 && event.charCode <= 57)"
              [(ngModel)]="paymentPopUpJson.payingAmount" name="payamt" (keyup)="totalPartialChange($event)" />
          </div>

          <div class="field-wrapper datePickerBox">
            <label for="pd">Payment Date*</label>
            <input type="text" value="" id="pd" class="form-ctrl bsDatepicker" readonly="true" [(ngModel)]="paymentPopUpJson.paid_date"
              name="pd" bsDatepicker>
          </div>

          <div class="field-wrapper">
            <label for="pMode">Payment Mode*</label>
            <!-- (ngModelChange)="paymentModeUpdate($event)" -->
            <select id="pMode" name="pMode" [(ngModel)]="paymentPopUpJson.payment_mode" class="form-ctrl"
              (ngModelChange)="paymentModeUpdate($event)">
              <option value="Cash" selected>Cash</option>
              <option value="Cheque/PDC/DD No.">Cheque/PDC/DD No.</option>
              <option value="Credit/Debit Card">Credit/Debit Card</option>            
              <option value="Caution Deposit(Refundable)">Caution Deposit(Refundable)</option>
              <option value="NEFT/RTGS"> NEFT/RTGS</option>
              <option value="Other">Other</option>
            </select>
          </div>

          <div class="field-wrapper">
            <label for="ref">Reference No.</label>
            <input type="text" value="" id="ref" class="form-ctrl" [(ngModel)]="paymentPopUpJson.reference_no" name="ref" />
          </div>

          <div class="field-wrapper">
            <label for="rema">Remarks</label>
            <input type="text" value="" id="rema" class="form-ctrl" [(ngModel)]="paymentPopUpJson.remarks" name="rema" />
          </div>

        </div>

        <!-- Cheque Payment PDC updates -->
        <div style="margin: 5px -5px;" class="row pdcChequePayment" *ngIf="paymentPopUpJson.payment_mode == 'Cheque/PDC/DD No.'">
          <h5></h5>

          <div [ngClass]="{'hide': chequePdcList.length == 0}" class="">
            <div class="c-lg-12">
              <div class="field-wrapper">
                <label for="pMode">Select PDC Cheque</label>
                <div class="questionInfo pos-rel">
                  <span class="qInfoIcon">?</span>
                  <div class="tooltip-box-field">
                    Choose Post Dated Cheque for which the payment is to be made. This is applicable if Cheques are
                    added using Manage Cheques
                  </div>
                </div>
                <select id="pMode" name="pMode" [(ngModel)]="paymentPopUpJson.selectedPdcId" class="form-ctrl"
                  (ngModelChange)="feePdcSelected($event)">
                  <option value=""></option>
                  <option [value]="opt.cheque_id" *ngFor="let opt of chequePdcList" [hidden]="opt.cheque_status_key != 1">
                    {{opt.cheque_date| procturDate}} ( {{opt.cheque_amount| commaSeprator}} )
                  </option>
                </select>
              </div>
            </div>
          </div>

          <div class="c-lg-12">
            <div class="field-wrapper">
              <label for="pdcfeepay">Bank Name*</label>
              <input [readonly]="!paymentPopUpJson.selectedPdcId == ''" type="text" value="" id="pdcfeepay" class="form-ctrl"
                [(ngModel)]="paymentPopUpJson.pdcSelectedForm.bank_name" name="" />
            </div>
          </div>

          <div class="c-lg-12">
            <div class="field-wrapper datePickerBox">
              <label for="pdcfeeselect">Cheque Date*</label>
              <input *ngIf="paymentPopUpJson.selectedPdcId == ''" type="text" value="" id="pdcfeeselect" class="form-ctrl bsDatepicker"
                readonly="true" [(ngModel)]="paymentPopUpJson.pdcSelectedForm.cheque_date" name="" bsDatepicker>
              <input *ngIf="!paymentPopUpJson.selectedPdcId == ''" type="text" value="" id="pdcfeeselect" class="form-ctrl bsDatepicker"
                readonly="true" [(ngModel)]="paymentPopUpJson.pdcSelectedForm.cheque_date" name="">
            </div>
          </div>

          <div class="c-lg-12">
            <div class="field-wrapper">
              <label for="pdccheque">Cheque No.*</label>
              <input [readonly]="!paymentPopUpJson.selectedPdcId == ''" id="pdccheque" type="text" minlength="6"
                maxlength="6" onkeypress="return (event.charCode >= 48 && event.charCode <= 57)" class="form-ctrl" name=""
                [(ngModel)]="paymentPopUpJson.pdcSelectedForm.cheque_no" />
            </div>
          </div>

          <div class="c-lg-12">
            <div class="field-wrapper">
              <label for="pdctrue">Cheque Amount*</label>
              <input readonly='true' type="text" value="" id="pdctrue" onkeypress="return (event.charCode >= 48 && event.charCode <= 57)"
                class="form-ctrl" name="" [(ngModel)]="paymentPopUpJson.pdcSelectedForm.cheque_amount" />
            </div>
          </div>
        </div>

        <div class="row" style="margin-top: 10px;">
          <div class="c-lg-6 c-md-6 c-sm-6">
            <div class="field-checkbox-wrapper">
              <input type="checkbox" value="" name="isGenPdc" [(ngModel)]="paymentPopUpJson.genFeeRecipt" class="form-checkbox"
                id="isGenPdc">
              <label for="isGenPdc">Generate Fee Receipt</label>
            </div>
          </div>
          <div class="c-lg-6 c-md-6 c-sm-6">
            <div class="field-checkbox-wrapper">
              <input type="checkbox" value="" name="emailPdc" [(ngModel)]="paymentPopUpJson.emailFeeRecipt" class="form-checkbox"
                id="emailPdc">
              <label for="emailPdc">Email Receipt</label>
            </div>
          </div>
        </div>

      </div>

    </div>

    <div class="" popup-footer>
      <div class="clearfix">
        <aside class="pull-right popup-btn">

        </aside>
        <aside class="pull-right popup-btn">
          <input type="button" value="Cancel" class="btn" (click)="flushPaymentPopUpData()">
          <input type="button" #btnPayment value="Update" (click)="payFeeInstallments()" class="fullBlue btn">
        </aside>
      </div>
    </div>

  </proctur-popup>

  <!-- ======================================================== -->
  <!-- ======================================================== -->
  <partial-pay-history *ngIf="isPartialPayHistory" (closeHist)="closeHistory($event)" [schedule_id]="schedule_id"
    [studentid]="student_id"></partial-pay-history>

</section>