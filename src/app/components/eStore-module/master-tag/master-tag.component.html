<loaders-css
  [loader]="'ball-scale-ripple-multiple'"
  class="app-loader-wrapper"
  [loaderClass]="'blueRipple'"
  *ngIf="isRippleLoad"
>
</loaders-css>

<div class="master-wrapper clearFix">
  <section class="header-section">
    <div class="header-full">
      <div class="row m-5">
        <h2
          style="padding: 16px 0px 3px 10px; font-size: 14px"
          class="pull-left"
        >
          <a routerLink="/view/e-store/home" style="padding:0px; ">
            eStore
          </a>
          <i style="font-family: 'FontAwesome';" class="fas fa-angle-right"></i>
          <span> Manage Tag</span>
        </h2>
      </div>
      <div class="m-5 filter_div">
        <div class="field-wrapper" style="margin-left: 0 !important;">
          <label>Master Tag<span class="text-danger">*</span></label>
          <div class="dropdown-div pt-2">
            <select
              class="dropdown"
              [(ngModel)]="selectedTag"
            >
              <option value="-1">Select Master Tag</option>
              <option
                *ngFor="let tag of allTagsList; let i = index"
                [value]="tag.tagId"
                (ngModelChange)="selectTag(selectedTag)"
                >{{ tag.tagName }}</option
              >
            </select>
          </div>
        </div>
        <button class="btn fullBlue" (click)="getTagDetails()">View</button>
        <button
          class="btn fullBlue pull-right"
          style="margin-top: 18px;" data-target="#addTag" data-toggle="modal" 
        >
          + Add New Tag
        </button>
      </div>
    </div>
  </section>
  <section class="table-control">
    <div class="col-lg-8"></div>
    <div class="col-lg-4 p-0">
      <div class="field-wrapper">
          <input class="search-box form-ctrl"  type="text"  [(ngModel)]="searchTag" (keyup)="filterTag()" placeholder="Search tag here"/>
      </div>
    </div>
</section>


  <div class="table-container tag-detail-container" *ngIf="tagDetailsData.length">
    <table>
      <thead class="table-header">
        <tr>
          <th class="b-grey line-0">Tag Id </th>
          <th class="text-left b-grey line-0">Tag Name</th>
          <th class="text-left b-grey line-0">Description</th>
          <th class="b-grey line-0">Active</th>
          <th class="b-grey text-left line-0">Action</th>
        </tr>
      </thead> 
      <tr *ngFor="let list of tagDetailsData">
        <td class="tbl-row">{{list.tagId}}</td>
        <td class="text-left tbl-row" title="{{list.tagName}}" >{{(list.tagName.length > 35) ? (list.tagName | slice:0:35) + '...': (list.tagName) }}</td>
        <td class="text-left tbl-row" title="{{list.description}}" *ngIf="list.description != null && list.description != ''">{{(list.description.length > 35) ? (list.description | slice:0:35) +'...' :(list.description)  }}</td>
        <td class="text-left tbl-row" *ngIf="list.description == null || list.description == ''">-</td>
        <td class="tbl-row">{{list.is_active}}</td>
        
        <td class="text-left p-0">
          <span class="p-0-5" title="Edit Tag" (click)="openEditModal(list)">
            <i class="fa fa-pencil edit-color"></i>
          </span>
          <span class="p-0-5" title="Delete Tag"  (click)="openDeleteModal(list.tagId)">
            <i class="fa fa-trash-o delete-color"></i>
          </span>
        </td>
      </tr>
    </table>   
  </div>

 <!--  <div *ngIf="isSearchItemExist" class="noSearchItem">
      No tags found
  </div> -->
</div>
<!--add tag master modal-->
<div class="modal fade" id="addTag" role="dialog"  tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h3 class="modal-title">Create Master Tag</h3>
      </div>
      <div class="modal-body">
        <div class="field-wrapper">
           <label>Tag Name<span class="text-danger">*</span></label>
           <div class="dropdown-div pt-2">
             <input class="dropdown" type="text" [(ngModel)]="tagName" placeholder=" Enter Tag Name" />
           </div>
        </div>
        <div class="field-wrapper">
          <label>Description</label>
          <div class="dropdown-div pt-2">
            <input class="dropdown" type="text" [(ngModel)]="tagDescription" placeholder=" Enter Description" />
          </div>
       </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary create-btn" (click)="createMasterTag()">Create</button>
      </div>
    </div>
    
  </div>
</div>

<!--delete confirmation-->
<div class="modal topic-add-model" style="position: fixed; top: 10em;left:20%" id="deleteTag" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content" style="padding: 1em;width:60%">
      <div class="modal-body">
        <div class="model_body_div">
            Are you sure, you want to delete this tag?
         </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn" style="color: indianred;" [disabled]="disableDelete"  (click)="deleteMasterTag()">Delete </button>
        <button type="button" class="btn" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>

<!--update master tag-->
<div class="modal fade" id="updateTag" role="dialog"  tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h3 class="modal-title">Update Tag</h3>
      </div>
      <div class="modal-body">
        <div class="field-wrapper">
           <label>Tag Name</label>
           <div class="dropdown-div pt-2">
             <input class="dropdown" type="text" [(ngModel)]="editTagName" />
           </div>
        </div>
        <div class="field-wrapper">
          <label>Description</label>
          <div class="dropdown-div pt-2">
            <input class="dropdown" type="text" [(ngModel)]="editTagDescription" />
          </div>
       </div>
       <div class="field-wrapper">
         <label>Status</label>
         <div class="dropdown-div">
            <select  class="dropdown" [(ngModel)]="editTagStatus">
              <option value="Y">Y</option>
              <option value="N">N</option>
            </select>
        </div>
       </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary create-btn" (click)="updateMasterTag()">Update</button>
      </div>
    </div>
    
  </div>
</div>